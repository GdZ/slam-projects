/**
 * Automatically generated by Zserio Java extension version 2.12.0.
 * Generator setup: writerCode, pubsubCode, serviceCode, sqlCode.
 */

package nds.core.geometry;

public class LineRangeOffset3D implements zserio.runtime.io.PackableWriter, zserio.runtime.PackableSizeOf
{
    public static final class ZserioPackingContext extends zserio.runtime.array.PackingContext
    {
        public ZserioPackingContext()
        {
            offsetType_ = new zserio.runtime.array.DeltaContext();
            numBitsXY_ = new zserio.runtime.array.DeltaContext();
            numBitsZ_ = new zserio.runtime.array.DeltaContext();
            startPosition_ = new zserio.runtime.array.DeltaContext();
            endPosition_ = new zserio.runtime.array.DeltaContext();
            startOffset_ = new nds.core.geometry.PositionOffset3D.ZserioPackingContext();
            endOffset_ = new nds.core.geometry.PositionOffset3D.ZserioPackingContext();
        }

        public zserio.runtime.array.DeltaContext getOffsetType()
        {
            return offsetType_;
        }

        public zserio.runtime.array.DeltaContext getNumBitsXY()
        {
            return numBitsXY_;
        }

        public zserio.runtime.array.DeltaContext getNumBitsZ()
        {
            return numBitsZ_;
        }

        public zserio.runtime.array.DeltaContext getStartPosition()
        {
            return startPosition_;
        }

        public zserio.runtime.array.DeltaContext getEndPosition()
        {
            return endPosition_;
        }

        public nds.core.geometry.PositionOffset3D.ZserioPackingContext getStartOffset()
        {
            return startOffset_;
        }

        public nds.core.geometry.PositionOffset3D.ZserioPackingContext getEndOffset()
        {
            return endOffset_;
        }

        private zserio.runtime.array.DeltaContext offsetType_;
        private zserio.runtime.array.DeltaContext numBitsXY_;
        private zserio.runtime.array.DeltaContext numBitsZ_;
        private zserio.runtime.array.DeltaContext startPosition_;
        private zserio.runtime.array.DeltaContext endPosition_;
        private nds.core.geometry.PositionOffset3D.ZserioPackingContext startOffset_;
        private nds.core.geometry.PositionOffset3D.ZserioPackingContext endOffset_;
    };

    public LineRangeOffset3D(
            byte shiftXY_,
            byte shiftZ_)
    {
        this.shiftXY_ = shiftXY_;
        this.shiftZ_ = shiftZ_;
    }

    public LineRangeOffset3D(zserio.runtime.io.BitStreamReader in,
            byte shiftXY_,
            byte shiftZ_)
            throws java.io.IOException
    {
        this.shiftXY_ = shiftXY_;
        this.shiftZ_ = shiftZ_;

        read(in);
    }

    public LineRangeOffset3D(zserio.runtime.array.PackingContext context, zserio.runtime.io.BitStreamReader in,
            byte shiftXY_,
            byte shiftZ_)
            throws java.io.IOException
    {
        this.shiftXY_ = shiftXY_;
        this.shiftZ_ = shiftZ_;

        read(context, in);
    }

    public LineRangeOffset3D(
            byte shiftXY_,
            byte shiftZ_,
            nds.core.geometry.RangeOffsetType offsetType_,
            byte numBitsXY_,
            byte numBitsZ_,
            int startPosition_,
            int endPosition_,
            nds.core.geometry.PositionOffset3D startOffset_,
            nds.core.geometry.PositionOffset3D endOffset_)
    {
        this(shiftXY_, shiftZ_);

        setOffsetType(offsetType_);
        setNumBitsXY(numBitsXY_);
        setNumBitsZ(numBitsZ_);
        setStartPosition(startPosition_);
        setEndPosition(endPosition_);
        setStartOffset(startOffset_);
        setEndOffset(endOffset_);
    }

    @Override
    public void initPackingContext(zserio.runtime.array.PackingContext context)
    {
        final ZserioPackingContext zserioContext = context.cast();
        offsetType_.initPackingContext(zserioContext.getOffsetType());
        zserioContext.getNumBitsXY().init(new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(5)),
                new zserio.runtime.array.ArrayElement.ByteArrayElement(numBitsXY_));
        zserioContext.getNumBitsZ().init(new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(5)),
                new zserio.runtime.array.ArrayElement.ByteArrayElement(numBitsZ_));
        zserioContext.getStartPosition().init(new zserio.runtime.array.ArrayTraits.VarSizeArrayTraits(),
                new zserio.runtime.array.ArrayElement.IntArrayElement(startPosition_));
        zserioContext.getEndPosition().init(new zserio.runtime.array.ArrayTraits.VarSizeArrayTraits(),
                new zserio.runtime.array.ArrayElement.IntArrayElement(endPosition_));
        if (isStartOffsetUsed())
        {
            startOffset_.initPackingContext(zserioContext.getStartOffset());
        }
        if (isEndOffsetUsed())
        {
            endOffset_.initPackingContext(zserioContext.getEndOffset());
        }
    }

    @Override
    public int bitSizeOf()
    {
        return bitSizeOf(0);
    }

    @Override
    public int bitSizeOf(long bitPosition)
    {
        long endBitPosition = bitPosition;

        endBitPosition += offsetType_.bitSizeOf(endBitPosition);
        endBitPosition += 5;
        endBitPosition += 5;
        endBitPosition += zserio.runtime.BitSizeOfCalculator.getBitSizeOfVarSize(startPosition_);
        endBitPosition += zserio.runtime.BitSizeOfCalculator.getBitSizeOfVarSize(endPosition_);
        if (isStartOffsetUsed())
        {
            endBitPosition += startOffset_.bitSizeOf(endBitPosition);
        }
        if (isEndOffsetUsed())
        {
            endBitPosition += endOffset_.bitSizeOf(endBitPosition);
        }

        return (int)(endBitPosition - bitPosition);
    }

    @Override
    public int bitSizeOf(zserio.runtime.array.PackingContext context, long bitPosition)
    {
        final ZserioPackingContext zserioContext = context.cast();
        long endBitPosition = bitPosition;

        endBitPosition += offsetType_.bitSizeOf(zserioContext.getOffsetType(), endBitPosition);
        endBitPosition += zserioContext.getNumBitsXY().bitSizeOf(new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(5)),
                new zserio.runtime.array.ArrayElement.ByteArrayElement(numBitsXY_));
        endBitPosition += zserioContext.getNumBitsZ().bitSizeOf(new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(5)),
                new zserio.runtime.array.ArrayElement.ByteArrayElement(numBitsZ_));
        endBitPosition += zserioContext.getStartPosition().bitSizeOf(new zserio.runtime.array.ArrayTraits.VarSizeArrayTraits(),
                new zserio.runtime.array.ArrayElement.IntArrayElement(startPosition_));
        endBitPosition += zserioContext.getEndPosition().bitSizeOf(new zserio.runtime.array.ArrayTraits.VarSizeArrayTraits(),
                new zserio.runtime.array.ArrayElement.IntArrayElement(endPosition_));
        if (isStartOffsetUsed())
        {
            endBitPosition += startOffset_.bitSizeOf(zserioContext.getStartOffset(), endBitPosition);
        }
        if (isEndOffsetUsed())
        {
            endBitPosition += endOffset_.bitSizeOf(zserioContext.getEndOffset(), endBitPosition);
        }

        return (int)(endBitPosition - bitPosition);
    }

    public byte getShiftXY()
    {
        return this.shiftXY_;
    }

    public byte getShiftZ()
    {
        return this.shiftZ_;
    }

    public nds.core.geometry.RangeOffsetType getOffsetType()
    {
        return offsetType_;
    }

    public void setOffsetType(nds.core.geometry.RangeOffsetType offsetType_)
    {
        this.offsetType_ = offsetType_;
    }

    public byte getNumBitsXY()
    {
        return numBitsXY_;
    }

    public void setNumBitsXY(byte numBitsXY_)
    {
        this.numBitsXY_ = numBitsXY_;
    }

    public byte getNumBitsZ()
    {
        return numBitsZ_;
    }

    public void setNumBitsZ(byte numBitsZ_)
    {
        this.numBitsZ_ = numBitsZ_;
    }

    public int getStartPosition()
    {
        return startPosition_;
    }

    public void setStartPosition(int startPosition_)
    {
        this.startPosition_ = startPosition_;
    }

    public int getEndPosition()
    {
        return endPosition_;
    }

    public void setEndPosition(int endPosition_)
    {
        this.endPosition_ = endPosition_;
    }

    public nds.core.geometry.PositionOffset3D getStartOffset()
    {
        return startOffset_;
    }

    public void setStartOffset(nds.core.geometry.PositionOffset3D startOffset_)
    {
        this.startOffset_ = startOffset_;
    }

    public boolean isStartOffsetUsed()
    {
        return (getOffsetType() == nds.core.geometry.RangeOffsetType.START || getOffsetType() == nds.core.geometry.RangeOffsetType.START_AND_END);
    }

    public boolean isStartOffsetSet()
    {
        return (startOffset_ != null);
    }

    public void resetStartOffset()
    {
        this.startOffset_ = null;
    }

    public nds.core.geometry.PositionOffset3D getEndOffset()
    {
        return endOffset_;
    }

    public void setEndOffset(nds.core.geometry.PositionOffset3D endOffset_)
    {
        this.endOffset_ = endOffset_;
    }

    public boolean isEndOffsetUsed()
    {
        return (getOffsetType() == nds.core.geometry.RangeOffsetType.END || getOffsetType() == nds.core.geometry.RangeOffsetType.START_AND_END);
    }

    public boolean isEndOffsetSet()
    {
        return (endOffset_ != null);
    }

    public void resetEndOffset()
    {
        this.endOffset_ = null;
    }

    @Override
    public boolean equals(java.lang.Object obj)
    {
        if (obj instanceof LineRangeOffset3D)
        {
            final LineRangeOffset3D that = (LineRangeOffset3D)obj;

            return
                    this.shiftXY_ == that.shiftXY_ &&
                    this.shiftZ_ == that.shiftZ_ &&
                    ((offsetType_ == null) ? that.offsetType_ == null : offsetType_.getValue() == that.offsetType_.getValue()) &&
                    numBitsXY_ == that.numBitsXY_ &&
                    numBitsZ_ == that.numBitsZ_ &&
                    startPosition_ == that.startPosition_ &&
                    endPosition_ == that.endPosition_ &&
                    ((!isStartOffsetUsed()) ? !that.isStartOffsetUsed() :
                        ((startOffset_ == null) ? that.startOffset_ == null : startOffset_.equals(that.startOffset_))) &&
                    ((!isEndOffsetUsed()) ? !that.isEndOffsetUsed() :
                        ((endOffset_ == null) ? that.endOffset_ == null : endOffset_.equals(that.endOffset_)));
        }

        return false;
    }

    @Override
    public int hashCode()
    {
        int result = zserio.runtime.HashCodeUtil.HASH_SEED;

        result = zserio.runtime.HashCodeUtil.calcHashCode(result, getShiftXY());
        result = zserio.runtime.HashCodeUtil.calcHashCode(result, getShiftZ());
        result = zserio.runtime.HashCodeUtil.calcHashCode(result, offsetType_);
        result = zserio.runtime.HashCodeUtil.calcHashCode(result, numBitsXY_);
        result = zserio.runtime.HashCodeUtil.calcHashCode(result, numBitsZ_);
        result = zserio.runtime.HashCodeUtil.calcHashCode(result, startPosition_);
        result = zserio.runtime.HashCodeUtil.calcHashCode(result, endPosition_);
        if (isStartOffsetUsed())
            result = zserio.runtime.HashCodeUtil.calcHashCode(result, startOffset_);
        if (isEndOffsetUsed())
            result = zserio.runtime.HashCodeUtil.calcHashCode(result, endOffset_);

        return result;
    }

    public void read(zserio.runtime.io.BitStreamReader in)
            throws java.io.IOException
    {
        offsetType_ = nds.core.geometry.RangeOffsetType.readEnum(in);

        numBitsXY_ = (byte)in.readBits(5);

        numBitsZ_ = (byte)in.readBits(5);

        startPosition_ = in.readVarSize();

        endPosition_ = in.readVarSize();

        if (getOffsetType() == nds.core.geometry.RangeOffsetType.START || getOffsetType() == nds.core.geometry.RangeOffsetType.START_AND_END)
        {
            startOffset_ = new nds.core.geometry.PositionOffset3D(in, (byte)(getNumBitsXY()), (byte)(getNumBitsZ()), (byte)(getShiftXY()), (byte)(getShiftZ()));
        }

        if (getOffsetType() == nds.core.geometry.RangeOffsetType.END || getOffsetType() == nds.core.geometry.RangeOffsetType.START_AND_END)
        {
            endOffset_ = new nds.core.geometry.PositionOffset3D(in, (byte)(getNumBitsXY()), (byte)(getNumBitsZ()), (byte)(getShiftXY()), (byte)(getShiftZ()));
        }
    }

    public void read(zserio.runtime.array.PackingContext context, zserio.runtime.io.BitStreamReader in)
            throws java.io.IOException
    {
        final ZserioPackingContext zserioContext = context.cast();
        offsetType_ = nds.core.geometry.RangeOffsetType.readEnum(zserioContext.getOffsetType(), in);

        numBitsXY_ = ((zserio.runtime.array.ArrayElement.ByteArrayElement)
                zserioContext.getNumBitsXY().read(new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(5)), in)).get();

        numBitsZ_ = ((zserio.runtime.array.ArrayElement.ByteArrayElement)
                zserioContext.getNumBitsZ().read(new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(5)), in)).get();

        startPosition_ = ((zserio.runtime.array.ArrayElement.IntArrayElement)
                zserioContext.getStartPosition().read(new zserio.runtime.array.ArrayTraits.VarSizeArrayTraits(), in)).get();

        endPosition_ = ((zserio.runtime.array.ArrayElement.IntArrayElement)
                zserioContext.getEndPosition().read(new zserio.runtime.array.ArrayTraits.VarSizeArrayTraits(), in)).get();

        if (getOffsetType() == nds.core.geometry.RangeOffsetType.START || getOffsetType() == nds.core.geometry.RangeOffsetType.START_AND_END)
        {
            startOffset_ = new nds.core.geometry.PositionOffset3D(zserioContext.getStartOffset(), in, (byte)(getNumBitsXY()), (byte)(getNumBitsZ()), (byte)(getShiftXY()), (byte)(getShiftZ()));
        }

        if (getOffsetType() == nds.core.geometry.RangeOffsetType.END || getOffsetType() == nds.core.geometry.RangeOffsetType.START_AND_END)
        {
            endOffset_ = new nds.core.geometry.PositionOffset3D(zserioContext.getEndOffset(), in, (byte)(getNumBitsXY()), (byte)(getNumBitsZ()), (byte)(getShiftXY()), (byte)(getShiftZ()));
        }
    }

    @Override
    public long initializeOffsets()
    {
        return initializeOffsets(0);
    }

    @Override
    public long initializeOffsets(long bitPosition)
    {
        long endBitPosition = bitPosition;

        endBitPosition += offsetType_.bitSizeOf(endBitPosition);
        endBitPosition += 5;
        endBitPosition += 5;
        endBitPosition += zserio.runtime.BitSizeOfCalculator.getBitSizeOfVarSize(startPosition_);
        endBitPosition += zserio.runtime.BitSizeOfCalculator.getBitSizeOfVarSize(endPosition_);
        if (isStartOffsetUsed())
        {
            endBitPosition = startOffset_.initializeOffsets(endBitPosition);
        }
        if (isEndOffsetUsed())
        {
            endBitPosition = endOffset_.initializeOffsets(endBitPosition);
        }

        return endBitPosition;
    }

    @Override
    public long initializeOffsets(zserio.runtime.array.PackingContext context, long bitPosition)
    {
        final ZserioPackingContext zserioContext = context.cast();
        long endBitPosition = bitPosition;

        endBitPosition = offsetType_.initializeOffsets(zserioContext.getOffsetType(), endBitPosition);
        endBitPosition += zserioContext.getNumBitsXY().bitSizeOf(new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(5)),
                new zserio.runtime.array.ArrayElement.ByteArrayElement(numBitsXY_));
        endBitPosition += zserioContext.getNumBitsZ().bitSizeOf(new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(5)),
                new zserio.runtime.array.ArrayElement.ByteArrayElement(numBitsZ_));
        endBitPosition += zserioContext.getStartPosition().bitSizeOf(new zserio.runtime.array.ArrayTraits.VarSizeArrayTraits(),
                new zserio.runtime.array.ArrayElement.IntArrayElement(startPosition_));
        endBitPosition += zserioContext.getEndPosition().bitSizeOf(new zserio.runtime.array.ArrayTraits.VarSizeArrayTraits(),
                new zserio.runtime.array.ArrayElement.IntArrayElement(endPosition_));
        if (isStartOffsetUsed())
        {
            endBitPosition = startOffset_.initializeOffsets(zserioContext.getStartOffset(), endBitPosition);
        }
        if (isEndOffsetUsed())
        {
            endBitPosition = endOffset_.initializeOffsets(zserioContext.getEndOffset(), endBitPosition);
        }

        return endBitPosition;
    }

    @Override
    public void write(zserio.runtime.io.BitStreamWriter out) throws java.io.IOException
    {
        offsetType_.write(out);

        out.writeBits(numBitsXY_, 5);

        out.writeBits(numBitsZ_, 5);

        out.writeVarSize(startPosition_);

        out.writeVarSize(endPosition_);

        if (isStartOffsetUsed())
        {
            // check parameters
            if (startOffset_.getNumBitsXY() != (byte)(getNumBitsXY()))
            {
                throw new zserio.runtime.ZserioError("Write: Wrong parameter numBitsXY for field LineRangeOffset3D.startOffset: " +
                        startOffset_.getNumBitsXY() + " != " + (byte)(getNumBitsXY()) + "!");
            }
            if (startOffset_.getNumBitsZ() != (byte)(getNumBitsZ()))
            {
                throw new zserio.runtime.ZserioError("Write: Wrong parameter numBitsZ for field LineRangeOffset3D.startOffset: " +
                        startOffset_.getNumBitsZ() + " != " + (byte)(getNumBitsZ()) + "!");
            }
            if (startOffset_.getShiftXY() != (byte)(getShiftXY()))
            {
                throw new zserio.runtime.ZserioError("Write: Wrong parameter shiftXY for field LineRangeOffset3D.startOffset: " +
                        startOffset_.getShiftXY() + " != " + (byte)(getShiftXY()) + "!");
            }
            if (startOffset_.getShiftZ() != (byte)(getShiftZ()))
            {
                throw new zserio.runtime.ZserioError("Write: Wrong parameter shiftZ for field LineRangeOffset3D.startOffset: " +
                        startOffset_.getShiftZ() + " != " + (byte)(getShiftZ()) + "!");
            }
            startOffset_.write(out);
        }

        if (isEndOffsetUsed())
        {
            // check parameters
            if (endOffset_.getNumBitsXY() != (byte)(getNumBitsXY()))
            {
                throw new zserio.runtime.ZserioError("Write: Wrong parameter numBitsXY for field LineRangeOffset3D.endOffset: " +
                        endOffset_.getNumBitsXY() + " != " + (byte)(getNumBitsXY()) + "!");
            }
            if (endOffset_.getNumBitsZ() != (byte)(getNumBitsZ()))
            {
                throw new zserio.runtime.ZserioError("Write: Wrong parameter numBitsZ for field LineRangeOffset3D.endOffset: " +
                        endOffset_.getNumBitsZ() + " != " + (byte)(getNumBitsZ()) + "!");
            }
            if (endOffset_.getShiftXY() != (byte)(getShiftXY()))
            {
                throw new zserio.runtime.ZserioError("Write: Wrong parameter shiftXY for field LineRangeOffset3D.endOffset: " +
                        endOffset_.getShiftXY() + " != " + (byte)(getShiftXY()) + "!");
            }
            if (endOffset_.getShiftZ() != (byte)(getShiftZ()))
            {
                throw new zserio.runtime.ZserioError("Write: Wrong parameter shiftZ for field LineRangeOffset3D.endOffset: " +
                        endOffset_.getShiftZ() + " != " + (byte)(getShiftZ()) + "!");
            }
            endOffset_.write(out);
        }
    }

    @Override
    public void write(zserio.runtime.array.PackingContext context, zserio.runtime.io.BitStreamWriter out)
            throws java.io.IOException
    {
        final ZserioPackingContext zserioContext = context.cast();
        offsetType_.write(zserioContext.getOffsetType(), out);

        zserioContext.getNumBitsXY().write(new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(5)), out,
                new zserio.runtime.array.ArrayElement.ByteArrayElement(numBitsXY_));

        zserioContext.getNumBitsZ().write(new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(5)), out,
                new zserio.runtime.array.ArrayElement.ByteArrayElement(numBitsZ_));

        zserioContext.getStartPosition().write(new zserio.runtime.array.ArrayTraits.VarSizeArrayTraits(), out,
                new zserio.runtime.array.ArrayElement.IntArrayElement(startPosition_));

        zserioContext.getEndPosition().write(new zserio.runtime.array.ArrayTraits.VarSizeArrayTraits(), out,
                new zserio.runtime.array.ArrayElement.IntArrayElement(endPosition_));

        if (isStartOffsetUsed())
        {
            startOffset_.write(zserioContext.getStartOffset(), out);
        }

        if (isEndOffsetUsed())
        {
            endOffset_.write(zserioContext.getEndOffset(), out);
        }
    }

    private final byte shiftXY_;
    private final byte shiftZ_;
    private nds.core.geometry.RangeOffsetType offsetType_;
    private byte numBitsXY_;
    private byte numBitsZ_;
    private int startPosition_;
    private int endPosition_;
    private nds.core.geometry.PositionOffset3D startOffset_;
    private nds.core.geometry.PositionOffset3D endOffset_;
}
