/**
 * Automatically generated by Zserio Java extension version 2.12.0.
 * Generator setup: writerCode, pubsubCode, serviceCode, sqlCode.
 */

package nds.smart.metadata;

public class SmartLayerRegistryMetadata implements zserio.runtime.io.PackableWriter, zserio.runtime.PackableSizeOf
{
    public static final class ZserioPackingContext extends zserio.runtime.array.PackingContext
    {
        public ZserioPackingContext()
        {
            smartLayerType_ = new zserio.runtime.array.DeltaContext();
            smartLayerDefinition_ = new nds.smart.metadata.SmartLayerDefinition.ZserioPackingContext();
            capabilities_ = new nds.smart.metadata.SmartLayerServiceCapabilities.ZserioPackingContext();
            objectClass_ = new zserio.runtime.array.DeltaContext();
        }

        public zserio.runtime.array.DeltaContext getSmartLayerType()
        {
            return smartLayerType_;
        }

        public nds.smart.metadata.SmartLayerDefinition.ZserioPackingContext getSmartLayerDefinition()
        {
            return smartLayerDefinition_;
        }

        public nds.smart.metadata.SmartLayerServiceCapabilities.ZserioPackingContext getCapabilities()
        {
            return capabilities_;
        }

        public zserio.runtime.array.DeltaContext getObjectClass()
        {
            return objectClass_;
        }

        private zserio.runtime.array.DeltaContext smartLayerType_;
        private nds.smart.metadata.SmartLayerDefinition.ZserioPackingContext smartLayerDefinition_;
        private nds.smart.metadata.SmartLayerServiceCapabilities.ZserioPackingContext capabilities_;
        private zserio.runtime.array.DeltaContext objectClass_;
    };

    public SmartLayerRegistryMetadata()
    {
    }

    public SmartLayerRegistryMetadata(zserio.runtime.io.BitStreamReader in)
            throws java.io.IOException
    {
        read(in);
    }

    public SmartLayerRegistryMetadata(zserio.runtime.array.PackingContext context, zserio.runtime.io.BitStreamReader in)
            throws java.io.IOException
    {
        read(context, in);
    }

    public SmartLayerRegistryMetadata(
            nds.smart.types.SmartLayerType smartLayerType_,
            nds.smart.metadata.SmartLayerDefinition smartLayerDefinition_,
            nds.smart.metadata.SmartLayerServiceCapabilities capabilities_,
            byte[] supportedLevels_,
            nds.smart.metadata.SmartLayerMeshIndexContent meshIndexContent_,
            java.lang.Integer objectClass_)
    {
        setSmartLayerType(smartLayerType_);
        setSmartLayerDefinition(smartLayerDefinition_);
        setCapabilities(capabilities_);
        setSupportedLevels(supportedLevels_);
        setMeshIndexContent(meshIndexContent_);
        setObjectClass(objectClass_);
    }

    @Override
    public void initPackingContext(zserio.runtime.array.PackingContext context)
    {
        final ZserioPackingContext zserioContext = context.cast();
        smartLayerType_.initPackingContext(zserioContext.getSmartLayerType());
        smartLayerDefinition_.initPackingContext(zserioContext.getSmartLayerDefinition());
        capabilities_.initPackingContext(zserioContext.getCapabilities());
        if (isObjectClassUsed())
        {
            zserioContext.getObjectClass().init(new zserio.runtime.array.ArrayTraits.VarUInt32ArrayTraits(),
                    new zserio.runtime.array.ArrayElement.IntArrayElement(objectClass_));
        }
    }

    @Override
    public int bitSizeOf()
    {
        return bitSizeOf(0);
    }

    @Override
    public int bitSizeOf(long bitPosition)
    {
        long endBitPosition = bitPosition;

        endBitPosition += smartLayerType_.bitSizeOf(endBitPosition);
        endBitPosition += smartLayerDefinition_.bitSizeOf(endBitPosition);
        endBitPosition += capabilities_.bitSizeOf(endBitPosition);
        if (isSupportedLevelsUsed())
        {
            endBitPosition += supportedLevels_.bitSizeOf(endBitPosition);
        }
        if (isMeshIndexContentUsed())
        {
            endBitPosition += meshIndexContent_.bitSizeOf(endBitPosition);
        }
        if (isObjectClassUsed())
        {
            endBitPosition += zserio.runtime.BitSizeOfCalculator.getBitSizeOfVarUInt32(objectClass_);
        }

        return (int)(endBitPosition - bitPosition);
    }

    @Override
    public int bitSizeOf(zserio.runtime.array.PackingContext context, long bitPosition)
    {
        final ZserioPackingContext zserioContext = context.cast();
        long endBitPosition = bitPosition;

        endBitPosition += smartLayerType_.bitSizeOf(zserioContext.getSmartLayerType(), endBitPosition);
        endBitPosition += smartLayerDefinition_.bitSizeOf(zserioContext.getSmartLayerDefinition(), endBitPosition);
        endBitPosition += capabilities_.bitSizeOf(zserioContext.getCapabilities(), endBitPosition);
        if (isSupportedLevelsUsed())
        {
            endBitPosition += supportedLevels_.bitSizeOfPacked(endBitPosition);
        }
        if (isMeshIndexContentUsed())
        {
            endBitPosition += meshIndexContent_.bitSizeOf(endBitPosition);
        }
        if (isObjectClassUsed())
        {
            endBitPosition += zserioContext.getObjectClass().bitSizeOf(new zserio.runtime.array.ArrayTraits.VarUInt32ArrayTraits(),
                    new zserio.runtime.array.ArrayElement.IntArrayElement(objectClass_));
        }

        return (int)(endBitPosition - bitPosition);
    }

    public nds.smart.types.SmartLayerType getSmartLayerType()
    {
        return smartLayerType_;
    }

    public void setSmartLayerType(nds.smart.types.SmartLayerType smartLayerType_)
    {
        this.smartLayerType_ = smartLayerType_;
    }

    public nds.smart.metadata.SmartLayerDefinition getSmartLayerDefinition()
    {
        return smartLayerDefinition_;
    }

    public void setSmartLayerDefinition(nds.smart.metadata.SmartLayerDefinition smartLayerDefinition_)
    {
        this.smartLayerDefinition_ = smartLayerDefinition_;
    }

    public nds.smart.metadata.SmartLayerServiceCapabilities getCapabilities()
    {
        return capabilities_;
    }

    public void setCapabilities(nds.smart.metadata.SmartLayerServiceCapabilities capabilities_)
    {
        this.capabilities_ = capabilities_;
    }

    public byte[] getSupportedLevels()
    {
        return (supportedLevels_ == null) ? null : supportedLevels_.getRawArray();
    }

    public void setSupportedLevels(byte[] supportedLevels_)
    {
        if (supportedLevels_ == null)
        {
            this.supportedLevels_ = null;
        }
        else
        {
            this.supportedLevels_ = new zserio.runtime.array.Array(
                    new zserio.runtime.array.RawArray.ByteRawArray(supportedLevels_),
                    new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(4)),
                    zserio.runtime.array.ArrayType.AUTO);
        }
    }

    public boolean isSupportedLevelsUsed()
    {
        return (getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_TILE || getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_MESH);
    }

    public boolean isSupportedLevelsSet()
    {
        return (supportedLevels_ != null);
    }

    public void resetSupportedLevels()
    {
        this.supportedLevels_ = null;
    }

    public nds.smart.metadata.SmartLayerMeshIndexContent getMeshIndexContent()
    {
        return meshIndexContent_;
    }

    public void setMeshIndexContent(nds.smart.metadata.SmartLayerMeshIndexContent meshIndexContent_)
    {
        this.meshIndexContent_ = meshIndexContent_;
    }

    public boolean isMeshIndexContentUsed()
    {
        return (getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_MESH);
    }

    public boolean isMeshIndexContentSet()
    {
        return (meshIndexContent_ != null);
    }

    public void resetMeshIndexContent()
    {
        this.meshIndexContent_ = null;
    }

    public java.lang.Integer getObjectClass()
    {
        return objectClass_;
    }

    public void setObjectClass(java.lang.Integer objectClass_)
    {
        this.objectClass_ = objectClass_;
    }

    public boolean isObjectClassUsed()
    {
        return (getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_OBJECT);
    }

    public boolean isObjectClassSet()
    {
        return (objectClass_ != null);
    }

    public void resetObjectClass()
    {
        this.objectClass_ = null;
    }

    @Override
    public boolean equals(java.lang.Object obj)
    {
        if (obj instanceof SmartLayerRegistryMetadata)
        {
            final SmartLayerRegistryMetadata that = (SmartLayerRegistryMetadata)obj;

            return
                    ((smartLayerType_ == null) ? that.smartLayerType_ == null : smartLayerType_.getValue() == that.smartLayerType_.getValue()) &&
                    ((smartLayerDefinition_ == null) ? that.smartLayerDefinition_ == null : smartLayerDefinition_.equals(that.smartLayerDefinition_)) &&
                    ((capabilities_ == null) ? that.capabilities_ == null : capabilities_.equals(that.capabilities_)) &&
                    ((!isSupportedLevelsUsed()) ? !that.isSupportedLevelsUsed() :
                        ((supportedLevels_ == null) ? that.supportedLevels_ == null : supportedLevels_.equals(that.supportedLevels_))) &&
                    ((!isMeshIndexContentUsed()) ? !that.isMeshIndexContentUsed() :
                        ((meshIndexContent_ == null) ? that.meshIndexContent_ == null : meshIndexContent_.equals(that.meshIndexContent_))) &&
                    ((!isObjectClassUsed()) ? !that.isObjectClassUsed() :
                        ((objectClass_ == null) ? that.objectClass_ == null : objectClass_.equals(that.objectClass_)));
        }

        return false;
    }

    @Override
    public int hashCode()
    {
        int result = zserio.runtime.HashCodeUtil.HASH_SEED;

        result = zserio.runtime.HashCodeUtil.calcHashCode(result, smartLayerType_);
        result = zserio.runtime.HashCodeUtil.calcHashCode(result, smartLayerDefinition_);
        result = zserio.runtime.HashCodeUtil.calcHashCode(result, capabilities_);
        if (isSupportedLevelsUsed())
            result = zserio.runtime.HashCodeUtil.calcHashCode(result, supportedLevels_);
        if (isMeshIndexContentUsed())
            result = zserio.runtime.HashCodeUtil.calcHashCode(result, meshIndexContent_);
        if (isObjectClassUsed())
            result = zserio.runtime.HashCodeUtil.calcHashCode(result, objectClass_);

        return result;
    }

    public void read(zserio.runtime.io.BitStreamReader in)
            throws java.io.IOException
    {
        smartLayerType_ = nds.smart.types.SmartLayerType.readEnum(in);

        smartLayerDefinition_ = new nds.smart.metadata.SmartLayerDefinition(in);

        capabilities_ = new nds.smart.metadata.SmartLayerServiceCapabilities(in, getSmartLayerType());

        if (getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_TILE || getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_MESH)
        {
            supportedLevels_ = new zserio.runtime.array.Array(
                    new zserio.runtime.array.RawArray.ByteRawArray(),
                    new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(4)),
                    zserio.runtime.array.ArrayType.AUTO);
            supportedLevels_.read(in);
        }

        if (getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_MESH)
        {
            meshIndexContent_ = new nds.smart.metadata.SmartLayerMeshIndexContent(in);
        }

        if (getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_OBJECT)
        {
            objectClass_ = in.readVarUInt32();
        }
    }

    public void read(zserio.runtime.array.PackingContext context, zserio.runtime.io.BitStreamReader in)
            throws java.io.IOException
    {
        final ZserioPackingContext zserioContext = context.cast();
        smartLayerType_ = nds.smart.types.SmartLayerType.readEnum(zserioContext.getSmartLayerType(), in);

        smartLayerDefinition_ = new nds.smart.metadata.SmartLayerDefinition(zserioContext.getSmartLayerDefinition(), in);

        capabilities_ = new nds.smart.metadata.SmartLayerServiceCapabilities(zserioContext.getCapabilities(), in, getSmartLayerType());

        if (getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_TILE || getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_MESH)
        {
            supportedLevels_ = new zserio.runtime.array.Array(
                    new zserio.runtime.array.RawArray.ByteRawArray(),
                    new zserio.runtime.array.ArrayTraits.BitFieldByteArrayTraits((int)(4)),
                    zserio.runtime.array.ArrayType.AUTO);
            supportedLevels_.readPacked(in);
        }

        if (getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_MESH)
        {
            meshIndexContent_ = new nds.smart.metadata.SmartLayerMeshIndexContent(in);
        }

        if (getSmartLayerType() == nds.smart.types.SmartLayerType.SMART_LAYER_OBJECT)
        {
            objectClass_ = ((zserio.runtime.array.ArrayElement.IntArrayElement)
                    zserioContext.getObjectClass().read(new zserio.runtime.array.ArrayTraits.VarUInt32ArrayTraits(), in)).get();
        }
    }

    @Override
    public long initializeOffsets()
    {
        return initializeOffsets(0);
    }

    @Override
    public long initializeOffsets(long bitPosition)
    {
        long endBitPosition = bitPosition;

        endBitPosition += smartLayerType_.bitSizeOf(endBitPosition);
        endBitPosition = smartLayerDefinition_.initializeOffsets(endBitPosition);
        endBitPosition = capabilities_.initializeOffsets(endBitPosition);
        if (isSupportedLevelsUsed())
        {
            endBitPosition = supportedLevels_.initializeOffsets(endBitPosition);
        }
        if (isMeshIndexContentUsed())
        {
            endBitPosition = meshIndexContent_.initializeOffsets(endBitPosition);
        }
        if (isObjectClassUsed())
        {
            endBitPosition += zserio.runtime.BitSizeOfCalculator.getBitSizeOfVarUInt32(objectClass_);
        }

        return endBitPosition;
    }

    @Override
    public long initializeOffsets(zserio.runtime.array.PackingContext context, long bitPosition)
    {
        final ZserioPackingContext zserioContext = context.cast();
        long endBitPosition = bitPosition;

        endBitPosition = smartLayerType_.initializeOffsets(zserioContext.getSmartLayerType(), endBitPosition);
        endBitPosition = smartLayerDefinition_.initializeOffsets(zserioContext.getSmartLayerDefinition(), endBitPosition);
        endBitPosition = capabilities_.initializeOffsets(zserioContext.getCapabilities(), endBitPosition);
        if (isSupportedLevelsUsed())
        {
            endBitPosition = supportedLevels_.initializeOffsetsPacked(endBitPosition);
        }
        if (isMeshIndexContentUsed())
        {
            endBitPosition = meshIndexContent_.initializeOffsets(endBitPosition);
        }
        if (isObjectClassUsed())
        {
            endBitPosition += zserioContext.getObjectClass().bitSizeOf(new zserio.runtime.array.ArrayTraits.VarUInt32ArrayTraits(),
                    new zserio.runtime.array.ArrayElement.IntArrayElement(objectClass_));
        }

        return endBitPosition;
    }

    @Override
    public void write(zserio.runtime.io.BitStreamWriter out) throws java.io.IOException
    {
        smartLayerType_.write(out);

        smartLayerDefinition_.write(out);

        // check parameters
        if (capabilities_.getType() != (getSmartLayerType()))
        {
            throw new zserio.runtime.ZserioError("Write: Inconsistent parameter type for field SmartLayerRegistryMetadata.capabilities!");
        }
        capabilities_.write(out);

        if (isSupportedLevelsUsed())
        {
            supportedLevels_.write(out);
        }

        if (isMeshIndexContentUsed())
        {
            meshIndexContent_.write(out);
        }

        if (isObjectClassUsed())
        {
            out.writeVarUInt32(objectClass_);
        }
    }

    @Override
    public void write(zserio.runtime.array.PackingContext context, zserio.runtime.io.BitStreamWriter out)
            throws java.io.IOException
    {
        final ZserioPackingContext zserioContext = context.cast();
        smartLayerType_.write(zserioContext.getSmartLayerType(), out);

        smartLayerDefinition_.write(zserioContext.getSmartLayerDefinition(), out);

        capabilities_.write(zserioContext.getCapabilities(), out);

        if (isSupportedLevelsUsed())
        {
            supportedLevels_.writePacked(out);
        }

        if (isMeshIndexContentUsed())
        {
            meshIndexContent_.write(out);
        }

        if (isObjectClassUsed())
        {
            zserioContext.getObjectClass().write(new zserio.runtime.array.ArrayTraits.VarUInt32ArrayTraits(), out,
                    new zserio.runtime.array.ArrayElement.IntArrayElement(objectClass_));
        }
    }

    private nds.smart.types.SmartLayerType smartLayerType_;
    private nds.smart.metadata.SmartLayerDefinition smartLayerDefinition_;
    private nds.smart.metadata.SmartLayerServiceCapabilities capabilities_;
    private zserio.runtime.array.Array supportedLevels_;
    private nds.smart.metadata.SmartLayerMeshIndexContent meshIndexContent_;
    private java.lang.Integer objectClass_;
}
