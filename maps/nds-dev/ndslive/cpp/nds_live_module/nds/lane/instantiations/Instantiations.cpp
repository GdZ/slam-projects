/**
 * Automatically generated by Zserio C++ extension version 2.12.0.
 * Generator setup: writerCode, pubsubCode, serviceCode, sqlCode, sourcesAmalgamation, stdAllocator.
 */

#include <zserio/StringConvertUtil.h>
#include <zserio/CppRuntimeException.h>
#include <zserio/HashCodeUtil.h>
#include <zserio/BitPositionUtil.h>
#include <zserio/BitSizeOfCalculator.h>
#include <zserio/BitFieldUtil.h>

#include <nds/lane/instantiations/CenterLineGeometryLayer.h>

namespace nds
{
namespace lane
{
namespace instantiations
{

CenterLineGeometryLayer::CenterLineGeometryLayer(const allocator_type& allocator) noexcept :
        m_isInitialized(false),
        m_coordShiftXY_(::nds::core::geometry::CoordShift()),
        m_coordShiftZ_(::nds::core::geometry::CoordShift()),
        m_numElements_(uint32_t()),
        m_identifier_(::zserio::NullOpt),
        m_types_(::zserio::NullOpt),
        m_buffers_(allocator)
{
}

CenterLineGeometryLayer::CenterLineGeometryLayer(::zserio::BitStreamReader& in,
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_, const allocator_type& allocator) :
        m_type_(type_),
        m_hasIds_(hasIds_),
        m_hasTypes_(hasTypes_),
        m_isInitialized(true),
        m_coordShiftXY_(readCoordShiftXY(in)),
        m_coordShiftZ_(readCoordShiftZ(in)),
        m_numElements_(readNumElements(in)),
        m_identifier_(readIdentifier(in, allocator)),
        m_types_(readTypes(in, allocator)),
        m_buffers_(readBuffers(in, allocator))
{
}

CenterLineGeometryLayer::CenterLineGeometryLayer(CenterLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in,
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_, const allocator_type& allocator) :
        m_type_(type_),
        m_hasIds_(hasIds_),
        m_hasTypes_(hasTypes_),
        m_isInitialized(true),
        m_coordShiftXY_(readCoordShiftXY(context, in)),
        m_coordShiftZ_(readCoordShiftZ(context, in)),
        m_numElements_(readNumElements(context, in)),
        m_identifier_(readIdentifier(context, in, allocator)),
        m_types_(readTypes(in, allocator)),
        m_buffers_(readBuffers(context, in, allocator))
{
}

CenterLineGeometryLayer::CenterLineGeometryLayer(const CenterLineGeometryLayer& other) :
        m_coordShiftXY_(other.m_coordShiftXY_),
        m_coordShiftZ_(other.m_coordShiftZ_),
        m_numElements_(other.m_numElements_),
        m_identifier_(other.m_identifier_),
        m_types_(other.m_types_),
        m_buffers_(other.m_buffers_)
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

CenterLineGeometryLayer& CenterLineGeometryLayer::operator=(const CenterLineGeometryLayer& other)
{
    m_coordShiftXY_ = other.m_coordShiftXY_;
    m_coordShiftZ_ = other.m_coordShiftZ_;
    m_numElements_ = other.m_numElements_;
    m_identifier_ = other.m_identifier_;
    m_types_ = other.m_types_;
    m_buffers_ = other.m_buffers_;
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;

    return *this;
}

CenterLineGeometryLayer::CenterLineGeometryLayer(CenterLineGeometryLayer&& other) :
        m_coordShiftXY_(::std::move(other.m_coordShiftXY_)),
        m_coordShiftZ_(::std::move(other.m_coordShiftZ_)),
        m_numElements_(::std::move(other.m_numElements_)),
        m_identifier_(::std::move(other.m_identifier_)),
        m_types_(::std::move(other.m_types_)),
        m_buffers_(::std::move(other.m_buffers_))
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

CenterLineGeometryLayer& CenterLineGeometryLayer::operator=(CenterLineGeometryLayer&& other)
{
    m_coordShiftXY_ = ::std::move(other.m_coordShiftXY_);
    m_coordShiftZ_ = ::std::move(other.m_coordShiftZ_);
    m_numElements_ = ::std::move(other.m_numElements_);
    m_identifier_ = ::std::move(other.m_identifier_);
    m_types_ = ::std::move(other.m_types_);
    m_buffers_ = ::std::move(other.m_buffers_);
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;

    return *this;
}

CenterLineGeometryLayer::CenterLineGeometryLayer(::zserio::PropagateAllocatorT,
        const CenterLineGeometryLayer& other, const allocator_type& allocator) :
        m_coordShiftXY_(::zserio::allocatorPropagatingCopy(other.m_coordShiftXY_, allocator)),
        m_coordShiftZ_(::zserio::allocatorPropagatingCopy(other.m_coordShiftZ_, allocator)),
        m_numElements_(::zserio::allocatorPropagatingCopy(other.m_numElements_, allocator)),
        m_identifier_(::zserio::allocatorPropagatingCopy(other.m_identifier_, allocator)),
        m_types_(::zserio::allocatorPropagatingCopy(other.m_types_, allocator)),
        m_buffers_(::zserio::allocatorPropagatingCopy(other.m_buffers_, allocator))
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

void CenterLineGeometryLayer::initialize(
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_)
{
    m_type_ = type_;
    m_hasIds_ = hasIds_;
    m_hasTypes_ = hasTypes_;
    m_isInitialized = true;

    initializeChildren();
}

bool CenterLineGeometryLayer::isInitialized() const
{
    return m_isInitialized;
}

void CenterLineGeometryLayer::initializeChildren()
{
    m_buffers_.initialize(static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()));
}

::nds::core::geometry::GeometryLayerType CenterLineGeometryLayer::getType() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'type' of compound 'CenterLineGeometryLayer' is not initialized!");

    return m_type_;
}

bool CenterLineGeometryLayer::getHasIds() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'hasIds' of compound 'CenterLineGeometryLayer' is not initialized!");

    return m_hasIds_;
}

bool CenterLineGeometryLayer::getHasTypes() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'hasTypes' of compound 'CenterLineGeometryLayer' is not initialized!");

    return m_hasTypes_;
}

::nds::core::geometry::CoordShift CenterLineGeometryLayer::getCoordShiftXY() const
{
    return m_coordShiftXY_;
}

void CenterLineGeometryLayer::setCoordShiftXY(::nds::core::geometry::CoordShift coordShiftXY_)
{
    m_coordShiftXY_ = coordShiftXY_;
}

::nds::core::geometry::CoordShift CenterLineGeometryLayer::getCoordShiftZ() const
{
    return m_coordShiftZ_;
}

void CenterLineGeometryLayer::setCoordShiftZ(::nds::core::geometry::CoordShift coordShiftZ_)
{
    m_coordShiftZ_ = coordShiftZ_;
}

uint32_t CenterLineGeometryLayer::getNumElements() const
{
    return m_numElements_;
}

void CenterLineGeometryLayer::setNumElements(uint32_t numElements_)
{
    m_numElements_ = numElements_;
}

::zserio::vector<::nds::lane::lanes::LaneCenterLineGeometryId>& CenterLineGeometryLayer::getIdentifier()
{
    return m_identifier_.value().getRawArray();
}

const ::zserio::vector<::nds::lane::lanes::LaneCenterLineGeometryId>& CenterLineGeometryLayer::getIdentifier() const
{
    return m_identifier_.value().getRawArray();
}

void CenterLineGeometryLayer::setIdentifier(const ::zserio::vector<::nds::lane::lanes::LaneCenterLineGeometryId>& identifier_)
{
    m_identifier_ = ZserioArrayType_identifier(identifier_);
}

void CenterLineGeometryLayer::setIdentifier(::zserio::vector<::nds::lane::lanes::LaneCenterLineGeometryId>&& identifier_)
{
    m_identifier_ = ZserioArrayType_identifier(std::move(identifier_));
}

bool CenterLineGeometryLayer::isIdentifierUsed() const
{
    return (getHasIds());
}

bool CenterLineGeometryLayer::isIdentifierSet() const
{
    return m_identifier_.hasValue();
}

void CenterLineGeometryLayer::resetIdentifier()
{
    m_identifier_.reset();
}

::zserio::vector<::nds::core::geometry::GeometryType>& CenterLineGeometryLayer::getTypes()
{
    return m_types_.value().getRawArray();
}

const ::zserio::vector<::nds::core::geometry::GeometryType>& CenterLineGeometryLayer::getTypes() const
{
    return m_types_.value().getRawArray();
}

void CenterLineGeometryLayer::setTypes(const ::zserio::vector<::nds::core::geometry::GeometryType>& types_)
{
    m_types_ = ZserioArrayType_types(types_);
}

void CenterLineGeometryLayer::setTypes(::zserio::vector<::nds::core::geometry::GeometryType>&& types_)
{
    m_types_ = ZserioArrayType_types(std::move(types_));
}

bool CenterLineGeometryLayer::isTypesUsed() const
{
    return (getHasTypes());
}

bool CenterLineGeometryLayer::isTypesSet() const
{
    return m_types_.hasValue();
}

void CenterLineGeometryLayer::resetTypes()
{
    m_types_.reset();
}

::nds::core::geometry::Buffers& CenterLineGeometryLayer::getBuffers()
{
    return m_buffers_;
}

const ::nds::core::geometry::Buffers& CenterLineGeometryLayer::getBuffers() const
{
    return m_buffers_;
}

void CenterLineGeometryLayer::setBuffers(const ::nds::core::geometry::Buffers& buffers_)
{
    m_buffers_ = buffers_;
}

void CenterLineGeometryLayer::setBuffers(::nds::core::geometry::Buffers&& buffers_)
{
    m_buffers_ = ::std::move(buffers_);
}

void CenterLineGeometryLayer::initPackingContext(CenterLineGeometryLayer::ZserioPackingContext& context) const
{
    context.getCoordShiftXY().init<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    context.getCoordShiftZ().init<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    context.getNumElements().init<::zserio::VarSizeArrayTraits>(m_numElements_);
    m_buffers_.initPackingContext(context.getBuffers());
}

size_t CenterLineGeometryLayer::bitSizeOf(size_t bitPosition) const
{
    size_t endBitPosition = bitPosition;

    endBitPosition += UINT8_C(5);
    endBitPosition += UINT8_C(5);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += ::zserio::bitSizeOfVarSize(m_numElements_);
    if (getHasIds())
    {
        endBitPosition += m_identifier_.value().bitSizeOfPacked(endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition += m_types_.value().bitSizeOf(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += m_buffers_.bitSizeOf(endBitPosition);

    return endBitPosition - bitPosition;
}

size_t CenterLineGeometryLayer::bitSizeOf(CenterLineGeometryLayer::ZserioPackingContext& context, size_t bitPosition) const
{
    size_t endBitPosition = bitPosition;

    endBitPosition += context.getCoordShiftXY().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    endBitPosition += context.getCoordShiftZ().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += context.getNumElements().bitSizeOf<::zserio::VarSizeArrayTraits>(m_numElements_);
    if (getHasIds())
    {
        endBitPosition += m_identifier_.value().bitSizeOfPacked(endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition += m_types_.value().bitSizeOf(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += m_buffers_.bitSizeOf(context.getBuffers(), endBitPosition);

    return endBitPosition - bitPosition;
}

size_t CenterLineGeometryLayer::initializeOffsets(size_t bitPosition)
{
    size_t endBitPosition = bitPosition;

    endBitPosition += UINT8_C(5);
    endBitPosition += UINT8_C(5);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += ::zserio::bitSizeOfVarSize(m_numElements_);
    if (getHasIds())
    {
        endBitPosition = m_identifier_.value().initializeOffsetsPacked(endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition = m_types_.value().initializeOffsets(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition = m_buffers_.initializeOffsets(endBitPosition);

    return endBitPosition;
}

size_t CenterLineGeometryLayer::initializeOffsets(CenterLineGeometryLayer::ZserioPackingContext& context, size_t bitPosition)
{
    size_t endBitPosition = bitPosition;

    endBitPosition += context.getCoordShiftXY().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    endBitPosition += context.getCoordShiftZ().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += context.getNumElements().bitSizeOf<::zserio::VarSizeArrayTraits>(m_numElements_);
    if (getHasIds())
    {
        endBitPosition = m_identifier_.value().initializeOffsetsPacked(endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition = m_types_.value().initializeOffsets(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition = m_buffers_.initializeOffsets(context.getBuffers(), endBitPosition);

    return endBitPosition;
}

bool CenterLineGeometryLayer::operator==(const CenterLineGeometryLayer& other) const
{
    if (this != &other)
    {
        return
                (getType() == other.getType()) &&
                (getHasIds() == other.getHasIds()) &&
                (getHasTypes() == other.getHasTypes()) &&
                (m_coordShiftXY_ == other.m_coordShiftXY_) &&
                (m_coordShiftZ_ == other.m_coordShiftZ_) &&
                (m_numElements_ == other.m_numElements_) &&
                (!isIdentifierUsed() ? !other.isIdentifierUsed() : (m_identifier_ == other.m_identifier_)) &&
                (!isTypesUsed() ? !other.isTypesUsed() : (m_types_ == other.m_types_)) &&
                (m_buffers_ == other.m_buffers_);
    }

    return true;
}

uint32_t CenterLineGeometryLayer::hashCode() const
{
    uint32_t result = ::zserio::HASH_SEED;

    result = ::zserio::calcHashCode(result, getType());
    result = ::zserio::calcHashCode(result, getHasIds());
    result = ::zserio::calcHashCode(result, getHasTypes());
    result = ::zserio::calcHashCode(result, m_coordShiftXY_);
    result = ::zserio::calcHashCode(result, m_coordShiftZ_);
    result = ::zserio::calcHashCode(result, m_numElements_);
    if (isIdentifierUsed())
        result = ::zserio::calcHashCode(result, m_identifier_);
    if (isTypesUsed())
        result = ::zserio::calcHashCode(result, m_types_);
    result = ::zserio::calcHashCode(result, m_buffers_);

    return result;
}

void CenterLineGeometryLayer::write(::zserio::BitStreamWriter& out) const
{
    out.writeBits(m_coordShiftXY_, UINT8_C(5));

    out.writeBits(m_coordShiftZ_, UINT8_C(5));

    out.alignTo(8);
    out.writeVarSize(m_numElements_);

    if (getHasIds())
    {
        // check array length
        if (m_identifier_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field CenterLineGeometryLayer.identifier: ") <<
                    m_identifier_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_identifier_.value().writePacked(out);
    }

    if (getHasTypes())
    {
        out.alignTo(8);
        // check array length
        if (m_types_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field CenterLineGeometryLayer.types: ") <<
                    m_types_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_types_.value().write(*this, out);
    }

    out.alignTo(8);
    // check parameters
    if (m_buffers_.getType() != static_cast<::nds::core::geometry::GeometryLayerType>(getType()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter type for field CenterLineGeometryLayer.buffers: ") <<
                m_buffers_.getType() << " != " << static_cast<::nds::core::geometry::GeometryLayerType>(getType()) << "!";
    }
    if (m_buffers_.getShiftXY() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftXY for field CenterLineGeometryLayer.buffers: ") <<
                m_buffers_.getShiftXY() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()) << "!";
    }
    if (m_buffers_.getShiftZ() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftZ for field CenterLineGeometryLayer.buffers: ") <<
                m_buffers_.getShiftZ() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()) << "!";
    }
    if (m_buffers_.getNumElements() != static_cast<uint32_t>(getNumElements()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter numElements for field CenterLineGeometryLayer.buffers: ") <<
                m_buffers_.getNumElements() << " != " << static_cast<uint32_t>(getNumElements()) << "!";
    }
    m_buffers_.write(out);
}

void CenterLineGeometryLayer::write(CenterLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamWriter& out) const
{
    context.getCoordShiftXY().write<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(out, m_coordShiftXY_);

    context.getCoordShiftZ().write<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(out, m_coordShiftZ_);

    out.alignTo(8);
    context.getNumElements().write<::zserio::VarSizeArrayTraits>(out, m_numElements_);

    if (getHasIds())
    {
        // check array length
        if (m_identifier_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field CenterLineGeometryLayer.identifier: ") <<
                    m_identifier_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_identifier_.value().writePacked(out);
    }

    if (getHasTypes())
    {
        out.alignTo(8);
        // check array length
        if (m_types_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field CenterLineGeometryLayer.types: ") <<
                    m_types_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_types_.value().write(*this, out);
    }

    out.alignTo(8);
    // check parameters
    if (m_buffers_.getType() != static_cast<::nds::core::geometry::GeometryLayerType>(getType()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter type for field CenterLineGeometryLayer.buffers: ") <<
                m_buffers_.getType() << " != " << static_cast<::nds::core::geometry::GeometryLayerType>(getType()) << "!";
    }
    if (m_buffers_.getShiftXY() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftXY for field CenterLineGeometryLayer.buffers: ") <<
                m_buffers_.getShiftXY() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()) << "!";
    }
    if (m_buffers_.getShiftZ() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftZ for field CenterLineGeometryLayer.buffers: ") <<
                m_buffers_.getShiftZ() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()) << "!";
    }
    if (m_buffers_.getNumElements() != static_cast<uint32_t>(getNumElements()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter numElements for field CenterLineGeometryLayer.buffers: ") <<
                m_buffers_.getNumElements() << " != " << static_cast<uint32_t>(getNumElements()) << "!";
    }
    m_buffers_.write(context.getBuffers(), out);
}

void CenterLineGeometryLayer::ZserioElementFactory_types::create(CenterLineGeometryLayer&        ,
        ::zserio::vector<::nds::core::geometry::GeometryType>& array,
        ::zserio::BitStreamReader& in, size_t)
{
    array.emplace_back(in, array.get_allocator());
}

::nds::core::geometry::CoordShift CenterLineGeometryLayer::readCoordShiftXY(::zserio::BitStreamReader& in)
{
    return static_cast<::nds::core::geometry::CoordShift>(in.readBits(UINT8_C(5)));
}

::nds::core::geometry::CoordShift CenterLineGeometryLayer::readCoordShiftXY(CenterLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    return context.getCoordShiftXY().read<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(in);
}
::nds::core::geometry::CoordShift CenterLineGeometryLayer::readCoordShiftZ(::zserio::BitStreamReader& in)
{
    return static_cast<::nds::core::geometry::CoordShift>(in.readBits(UINT8_C(5)));
}

::nds::core::geometry::CoordShift CenterLineGeometryLayer::readCoordShiftZ(CenterLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    return context.getCoordShiftZ().read<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(in);
}
uint32_t CenterLineGeometryLayer::readNumElements(::zserio::BitStreamReader& in)
{
    in.alignTo(8);
    return static_cast<uint32_t>(in.readVarSize());
}

uint32_t CenterLineGeometryLayer::readNumElements(CenterLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    in.alignTo(8);
    return context.getNumElements().read<::zserio::VarSizeArrayTraits>(in);
}
::zserio::InplaceOptionalHolder<CenterLineGeometryLayer::ZserioArrayType_identifier> CenterLineGeometryLayer::readIdentifier(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    if (getHasIds())
    {
        ZserioArrayType_identifier readField(allocator);
        readField.readPacked(in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::zserio::NullOpt);
}

::zserio::InplaceOptionalHolder<CenterLineGeometryLayer::ZserioArrayType_identifier> CenterLineGeometryLayer::readIdentifier(CenterLineGeometryLayer::ZserioPackingContext&, ::zserio::BitStreamReader& in, const allocator_type& allocator)
{
    if (getHasIds())
    {
        ZserioArrayType_identifier readField(allocator);
        readField.readPacked(in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::zserio::NullOpt);
}
::zserio::InplaceOptionalHolder<CenterLineGeometryLayer::ZserioArrayType_types> CenterLineGeometryLayer::readTypes(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    if (getHasTypes())
    {
        in.alignTo(8);
        ZserioArrayType_types readField(allocator);
        readField.read(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::zserio::NullOpt);
}
::nds::core::geometry::Buffers CenterLineGeometryLayer::readBuffers(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    in.alignTo(8);
    return ::nds::core::geometry::Buffers(in, static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()), allocator);
}

::nds::core::geometry::Buffers CenterLineGeometryLayer::readBuffers(CenterLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in, const allocator_type& allocator)
{
    in.alignTo(8);
    return ::nds::core::geometry::Buffers(context.getBuffers(), in, static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()), allocator);
}

} // namespace instantiations
} // namespace lane
} // namespace nds

/**
 * Automatically generated by Zserio C++ extension version 2.12.0.
 * Generator setup: writerCode, pubsubCode, serviceCode, sqlCode, sourcesAmalgamation, stdAllocator.
 */

#include <zserio/StringConvertUtil.h>
#include <zserio/CppRuntimeException.h>
#include <zserio/HashCodeUtil.h>
#include <zserio/BitPositionUtil.h>
#include <zserio/BitSizeOfCalculator.h>
#include <zserio/BitFieldUtil.h>

#include <nds/lane/instantiations/BoundaryGeometryLayer.h>

namespace nds
{
namespace lane
{
namespace instantiations
{

BoundaryGeometryLayer::BoundaryGeometryLayer(const allocator_type& allocator) noexcept :
        m_isInitialized(false),
        m_coordShiftXY_(::nds::core::geometry::CoordShift()),
        m_coordShiftZ_(::nds::core::geometry::CoordShift()),
        m_numElements_(uint32_t()),
        m_identifier_(::zserio::NullOpt),
        m_types_(::zserio::NullOpt),
        m_buffers_(allocator)
{
}

BoundaryGeometryLayer::BoundaryGeometryLayer(::zserio::BitStreamReader& in,
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_, const allocator_type& allocator) :
        m_type_(type_),
        m_hasIds_(hasIds_),
        m_hasTypes_(hasTypes_),
        m_isInitialized(true),
        m_coordShiftXY_(readCoordShiftXY(in)),
        m_coordShiftZ_(readCoordShiftZ(in)),
        m_numElements_(readNumElements(in)),
        m_identifier_(readIdentifier(in, allocator)),
        m_types_(readTypes(in, allocator)),
        m_buffers_(readBuffers(in, allocator))
{
}

BoundaryGeometryLayer::BoundaryGeometryLayer(BoundaryGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in,
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_, const allocator_type& allocator) :
        m_type_(type_),
        m_hasIds_(hasIds_),
        m_hasTypes_(hasTypes_),
        m_isInitialized(true),
        m_coordShiftXY_(readCoordShiftXY(context, in)),
        m_coordShiftZ_(readCoordShiftZ(context, in)),
        m_numElements_(readNumElements(context, in)),
        m_identifier_(readIdentifier(context, in, allocator)),
        m_types_(readTypes(in, allocator)),
        m_buffers_(readBuffers(context, in, allocator))
{
}

BoundaryGeometryLayer::BoundaryGeometryLayer(const BoundaryGeometryLayer& other) :
        m_coordShiftXY_(other.m_coordShiftXY_),
        m_coordShiftZ_(other.m_coordShiftZ_),
        m_numElements_(other.m_numElements_),
        m_identifier_(other.m_identifier_),
        m_types_(other.m_types_),
        m_buffers_(other.m_buffers_)
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

BoundaryGeometryLayer& BoundaryGeometryLayer::operator=(const BoundaryGeometryLayer& other)
{
    m_coordShiftXY_ = other.m_coordShiftXY_;
    m_coordShiftZ_ = other.m_coordShiftZ_;
    m_numElements_ = other.m_numElements_;
    m_identifier_ = other.m_identifier_;
    m_types_ = other.m_types_;
    m_buffers_ = other.m_buffers_;
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;

    return *this;
}

BoundaryGeometryLayer::BoundaryGeometryLayer(BoundaryGeometryLayer&& other) :
        m_coordShiftXY_(::std::move(other.m_coordShiftXY_)),
        m_coordShiftZ_(::std::move(other.m_coordShiftZ_)),
        m_numElements_(::std::move(other.m_numElements_)),
        m_identifier_(::std::move(other.m_identifier_)),
        m_types_(::std::move(other.m_types_)),
        m_buffers_(::std::move(other.m_buffers_))
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

BoundaryGeometryLayer& BoundaryGeometryLayer::operator=(BoundaryGeometryLayer&& other)
{
    m_coordShiftXY_ = ::std::move(other.m_coordShiftXY_);
    m_coordShiftZ_ = ::std::move(other.m_coordShiftZ_);
    m_numElements_ = ::std::move(other.m_numElements_);
    m_identifier_ = ::std::move(other.m_identifier_);
    m_types_ = ::std::move(other.m_types_);
    m_buffers_ = ::std::move(other.m_buffers_);
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;

    return *this;
}

BoundaryGeometryLayer::BoundaryGeometryLayer(::zserio::PropagateAllocatorT,
        const BoundaryGeometryLayer& other, const allocator_type& allocator) :
        m_coordShiftXY_(::zserio::allocatorPropagatingCopy(other.m_coordShiftXY_, allocator)),
        m_coordShiftZ_(::zserio::allocatorPropagatingCopy(other.m_coordShiftZ_, allocator)),
        m_numElements_(::zserio::allocatorPropagatingCopy(other.m_numElements_, allocator)),
        m_identifier_(::zserio::allocatorPropagatingCopy(other.m_identifier_, allocator)),
        m_types_(::zserio::allocatorPropagatingCopy(other.m_types_, allocator)),
        m_buffers_(::zserio::allocatorPropagatingCopy(other.m_buffers_, allocator))
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

void BoundaryGeometryLayer::initialize(
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_)
{
    m_type_ = type_;
    m_hasIds_ = hasIds_;
    m_hasTypes_ = hasTypes_;
    m_isInitialized = true;

    initializeChildren();
}

bool BoundaryGeometryLayer::isInitialized() const
{
    return m_isInitialized;
}

void BoundaryGeometryLayer::initializeChildren()
{
    m_buffers_.initialize(static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()));
}

::nds::core::geometry::GeometryLayerType BoundaryGeometryLayer::getType() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'type' of compound 'BoundaryGeometryLayer' is not initialized!");

    return m_type_;
}

bool BoundaryGeometryLayer::getHasIds() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'hasIds' of compound 'BoundaryGeometryLayer' is not initialized!");

    return m_hasIds_;
}

bool BoundaryGeometryLayer::getHasTypes() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'hasTypes' of compound 'BoundaryGeometryLayer' is not initialized!");

    return m_hasTypes_;
}

::nds::core::geometry::CoordShift BoundaryGeometryLayer::getCoordShiftXY() const
{
    return m_coordShiftXY_;
}

void BoundaryGeometryLayer::setCoordShiftXY(::nds::core::geometry::CoordShift coordShiftXY_)
{
    m_coordShiftXY_ = coordShiftXY_;
}

::nds::core::geometry::CoordShift BoundaryGeometryLayer::getCoordShiftZ() const
{
    return m_coordShiftZ_;
}

void BoundaryGeometryLayer::setCoordShiftZ(::nds::core::geometry::CoordShift coordShiftZ_)
{
    m_coordShiftZ_ = coordShiftZ_;
}

uint32_t BoundaryGeometryLayer::getNumElements() const
{
    return m_numElements_;
}

void BoundaryGeometryLayer::setNumElements(uint32_t numElements_)
{
    m_numElements_ = numElements_;
}

::zserio::vector<::nds::lane::boundaries::BoundaryGeometryId>& BoundaryGeometryLayer::getIdentifier()
{
    return m_identifier_.value().getRawArray();
}

const ::zserio::vector<::nds::lane::boundaries::BoundaryGeometryId>& BoundaryGeometryLayer::getIdentifier() const
{
    return m_identifier_.value().getRawArray();
}

void BoundaryGeometryLayer::setIdentifier(const ::zserio::vector<::nds::lane::boundaries::BoundaryGeometryId>& identifier_)
{
    m_identifier_ = ZserioArrayType_identifier(identifier_);
}

void BoundaryGeometryLayer::setIdentifier(::zserio::vector<::nds::lane::boundaries::BoundaryGeometryId>&& identifier_)
{
    m_identifier_ = ZserioArrayType_identifier(std::move(identifier_));
}

bool BoundaryGeometryLayer::isIdentifierUsed() const
{
    return (getHasIds());
}

bool BoundaryGeometryLayer::isIdentifierSet() const
{
    return m_identifier_.hasValue();
}

void BoundaryGeometryLayer::resetIdentifier()
{
    m_identifier_.reset();
}

::zserio::vector<::nds::core::geometry::GeometryType>& BoundaryGeometryLayer::getTypes()
{
    return m_types_.value().getRawArray();
}

const ::zserio::vector<::nds::core::geometry::GeometryType>& BoundaryGeometryLayer::getTypes() const
{
    return m_types_.value().getRawArray();
}

void BoundaryGeometryLayer::setTypes(const ::zserio::vector<::nds::core::geometry::GeometryType>& types_)
{
    m_types_ = ZserioArrayType_types(types_);
}

void BoundaryGeometryLayer::setTypes(::zserio::vector<::nds::core::geometry::GeometryType>&& types_)
{
    m_types_ = ZserioArrayType_types(std::move(types_));
}

bool BoundaryGeometryLayer::isTypesUsed() const
{
    return (getHasTypes());
}

bool BoundaryGeometryLayer::isTypesSet() const
{
    return m_types_.hasValue();
}

void BoundaryGeometryLayer::resetTypes()
{
    m_types_.reset();
}

::nds::core::geometry::Buffers& BoundaryGeometryLayer::getBuffers()
{
    return m_buffers_;
}

const ::nds::core::geometry::Buffers& BoundaryGeometryLayer::getBuffers() const
{
    return m_buffers_;
}

void BoundaryGeometryLayer::setBuffers(const ::nds::core::geometry::Buffers& buffers_)
{
    m_buffers_ = buffers_;
}

void BoundaryGeometryLayer::setBuffers(::nds::core::geometry::Buffers&& buffers_)
{
    m_buffers_ = ::std::move(buffers_);
}

void BoundaryGeometryLayer::initPackingContext(BoundaryGeometryLayer::ZserioPackingContext& context) const
{
    context.getCoordShiftXY().init<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    context.getCoordShiftZ().init<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    context.getNumElements().init<::zserio::VarSizeArrayTraits>(m_numElements_);
    m_buffers_.initPackingContext(context.getBuffers());
}

size_t BoundaryGeometryLayer::bitSizeOf(size_t bitPosition) const
{
    size_t endBitPosition = bitPosition;

    endBitPosition += UINT8_C(5);
    endBitPosition += UINT8_C(5);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += ::zserio::bitSizeOfVarSize(m_numElements_);
    if (getHasIds())
    {
        endBitPosition += m_identifier_.value().bitSizeOfPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition += m_types_.value().bitSizeOf(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += m_buffers_.bitSizeOf(endBitPosition);

    return endBitPosition - bitPosition;
}

size_t BoundaryGeometryLayer::bitSizeOf(BoundaryGeometryLayer::ZserioPackingContext& context, size_t bitPosition) const
{
    size_t endBitPosition = bitPosition;

    endBitPosition += context.getCoordShiftXY().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    endBitPosition += context.getCoordShiftZ().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += context.getNumElements().bitSizeOf<::zserio::VarSizeArrayTraits>(m_numElements_);
    if (getHasIds())
    {
        endBitPosition += m_identifier_.value().bitSizeOfPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition += m_types_.value().bitSizeOf(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += m_buffers_.bitSizeOf(context.getBuffers(), endBitPosition);

    return endBitPosition - bitPosition;
}

size_t BoundaryGeometryLayer::initializeOffsets(size_t bitPosition)
{
    size_t endBitPosition = bitPosition;

    endBitPosition += UINT8_C(5);
    endBitPosition += UINT8_C(5);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += ::zserio::bitSizeOfVarSize(m_numElements_);
    if (getHasIds())
    {
        endBitPosition = m_identifier_.value().initializeOffsetsPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition = m_types_.value().initializeOffsets(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition = m_buffers_.initializeOffsets(endBitPosition);

    return endBitPosition;
}

size_t BoundaryGeometryLayer::initializeOffsets(BoundaryGeometryLayer::ZserioPackingContext& context, size_t bitPosition)
{
    size_t endBitPosition = bitPosition;

    endBitPosition += context.getCoordShiftXY().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    endBitPosition += context.getCoordShiftZ().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += context.getNumElements().bitSizeOf<::zserio::VarSizeArrayTraits>(m_numElements_);
    if (getHasIds())
    {
        endBitPosition = m_identifier_.value().initializeOffsetsPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition = m_types_.value().initializeOffsets(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition = m_buffers_.initializeOffsets(context.getBuffers(), endBitPosition);

    return endBitPosition;
}

bool BoundaryGeometryLayer::operator==(const BoundaryGeometryLayer& other) const
{
    if (this != &other)
    {
        return
                (getType() == other.getType()) &&
                (getHasIds() == other.getHasIds()) &&
                (getHasTypes() == other.getHasTypes()) &&
                (m_coordShiftXY_ == other.m_coordShiftXY_) &&
                (m_coordShiftZ_ == other.m_coordShiftZ_) &&
                (m_numElements_ == other.m_numElements_) &&
                (!isIdentifierUsed() ? !other.isIdentifierUsed() : (m_identifier_ == other.m_identifier_)) &&
                (!isTypesUsed() ? !other.isTypesUsed() : (m_types_ == other.m_types_)) &&
                (m_buffers_ == other.m_buffers_);
    }

    return true;
}

uint32_t BoundaryGeometryLayer::hashCode() const
{
    uint32_t result = ::zserio::HASH_SEED;

    result = ::zserio::calcHashCode(result, getType());
    result = ::zserio::calcHashCode(result, getHasIds());
    result = ::zserio::calcHashCode(result, getHasTypes());
    result = ::zserio::calcHashCode(result, m_coordShiftXY_);
    result = ::zserio::calcHashCode(result, m_coordShiftZ_);
    result = ::zserio::calcHashCode(result, m_numElements_);
    if (isIdentifierUsed())
        result = ::zserio::calcHashCode(result, m_identifier_);
    if (isTypesUsed())
        result = ::zserio::calcHashCode(result, m_types_);
    result = ::zserio::calcHashCode(result, m_buffers_);

    return result;
}

void BoundaryGeometryLayer::write(::zserio::BitStreamWriter& out) const
{
    out.writeBits(m_coordShiftXY_, UINT8_C(5));

    out.writeBits(m_coordShiftZ_, UINT8_C(5));

    out.alignTo(8);
    out.writeVarSize(m_numElements_);

    if (getHasIds())
    {
        // check array length
        if (m_identifier_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field BoundaryGeometryLayer.identifier: ") <<
                    m_identifier_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_identifier_.value().writePacked(*this, out);
    }

    if (getHasTypes())
    {
        out.alignTo(8);
        // check array length
        if (m_types_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field BoundaryGeometryLayer.types: ") <<
                    m_types_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_types_.value().write(*this, out);
    }

    out.alignTo(8);
    // check parameters
    if (m_buffers_.getType() != static_cast<::nds::core::geometry::GeometryLayerType>(getType()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter type for field BoundaryGeometryLayer.buffers: ") <<
                m_buffers_.getType() << " != " << static_cast<::nds::core::geometry::GeometryLayerType>(getType()) << "!";
    }
    if (m_buffers_.getShiftXY() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftXY for field BoundaryGeometryLayer.buffers: ") <<
                m_buffers_.getShiftXY() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()) << "!";
    }
    if (m_buffers_.getShiftZ() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftZ for field BoundaryGeometryLayer.buffers: ") <<
                m_buffers_.getShiftZ() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()) << "!";
    }
    if (m_buffers_.getNumElements() != static_cast<uint32_t>(getNumElements()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter numElements for field BoundaryGeometryLayer.buffers: ") <<
                m_buffers_.getNumElements() << " != " << static_cast<uint32_t>(getNumElements()) << "!";
    }
    m_buffers_.write(out);
}

void BoundaryGeometryLayer::write(BoundaryGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamWriter& out) const
{
    context.getCoordShiftXY().write<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(out, m_coordShiftXY_);

    context.getCoordShiftZ().write<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(out, m_coordShiftZ_);

    out.alignTo(8);
    context.getNumElements().write<::zserio::VarSizeArrayTraits>(out, m_numElements_);

    if (getHasIds())
    {
        // check array length
        if (m_identifier_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field BoundaryGeometryLayer.identifier: ") <<
                    m_identifier_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_identifier_.value().writePacked(*this, out);
    }

    if (getHasTypes())
    {
        out.alignTo(8);
        // check array length
        if (m_types_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field BoundaryGeometryLayer.types: ") <<
                    m_types_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_types_.value().write(*this, out);
    }

    out.alignTo(8);
    // check parameters
    if (m_buffers_.getType() != static_cast<::nds::core::geometry::GeometryLayerType>(getType()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter type for field BoundaryGeometryLayer.buffers: ") <<
                m_buffers_.getType() << " != " << static_cast<::nds::core::geometry::GeometryLayerType>(getType()) << "!";
    }
    if (m_buffers_.getShiftXY() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftXY for field BoundaryGeometryLayer.buffers: ") <<
                m_buffers_.getShiftXY() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()) << "!";
    }
    if (m_buffers_.getShiftZ() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftZ for field BoundaryGeometryLayer.buffers: ") <<
                m_buffers_.getShiftZ() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()) << "!";
    }
    if (m_buffers_.getNumElements() != static_cast<uint32_t>(getNumElements()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter numElements for field BoundaryGeometryLayer.buffers: ") <<
                m_buffers_.getNumElements() << " != " << static_cast<uint32_t>(getNumElements()) << "!";
    }
    m_buffers_.write(context.getBuffers(), out);
}

void BoundaryGeometryLayer::ZserioElementFactory_identifier::create(BoundaryGeometryLayer&        ,
        ::zserio::vector<::nds::lane::boundaries::BoundaryGeometryId>& array,
        ::zserio::BitStreamReader& in, size_t)
{
    array.emplace_back(in, array.get_allocator());
}

void BoundaryGeometryLayer::ZserioElementFactory_identifier::create(BoundaryGeometryLayer&        ,
        ::zserio::vector<::nds::lane::boundaries::BoundaryGeometryId>& array,
        ::nds::lane::boundaries::BoundaryGeometryId::ZserioPackingContext& context, ::zserio::BitStreamReader& in,
        size_t)
{
    array.emplace_back(context, in, array.get_allocator());
}

void BoundaryGeometryLayer::ZserioElementFactory_types::create(BoundaryGeometryLayer&        ,
        ::zserio::vector<::nds::core::geometry::GeometryType>& array,
        ::zserio::BitStreamReader& in, size_t)
{
    array.emplace_back(in, array.get_allocator());
}

::nds::core::geometry::CoordShift BoundaryGeometryLayer::readCoordShiftXY(::zserio::BitStreamReader& in)
{
    return static_cast<::nds::core::geometry::CoordShift>(in.readBits(UINT8_C(5)));
}

::nds::core::geometry::CoordShift BoundaryGeometryLayer::readCoordShiftXY(BoundaryGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    return context.getCoordShiftXY().read<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(in);
}
::nds::core::geometry::CoordShift BoundaryGeometryLayer::readCoordShiftZ(::zserio::BitStreamReader& in)
{
    return static_cast<::nds::core::geometry::CoordShift>(in.readBits(UINT8_C(5)));
}

::nds::core::geometry::CoordShift BoundaryGeometryLayer::readCoordShiftZ(BoundaryGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    return context.getCoordShiftZ().read<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(in);
}
uint32_t BoundaryGeometryLayer::readNumElements(::zserio::BitStreamReader& in)
{
    in.alignTo(8);
    return static_cast<uint32_t>(in.readVarSize());
}

uint32_t BoundaryGeometryLayer::readNumElements(BoundaryGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    in.alignTo(8);
    return context.getNumElements().read<::zserio::VarSizeArrayTraits>(in);
}
::zserio::InplaceOptionalHolder<BoundaryGeometryLayer::ZserioArrayType_identifier> BoundaryGeometryLayer::readIdentifier(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    if (getHasIds())
    {
        ZserioArrayType_identifier readField(allocator);
        readField.readPacked(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::zserio::NullOpt);
}

::zserio::InplaceOptionalHolder<BoundaryGeometryLayer::ZserioArrayType_identifier> BoundaryGeometryLayer::readIdentifier(BoundaryGeometryLayer::ZserioPackingContext&, ::zserio::BitStreamReader& in, const allocator_type& allocator)
{
    if (getHasIds())
    {
        ZserioArrayType_identifier readField(allocator);
        readField.readPacked(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::zserio::NullOpt);
}
::zserio::InplaceOptionalHolder<BoundaryGeometryLayer::ZserioArrayType_types> BoundaryGeometryLayer::readTypes(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    if (getHasTypes())
    {
        in.alignTo(8);
        ZserioArrayType_types readField(allocator);
        readField.read(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::zserio::NullOpt);
}
::nds::core::geometry::Buffers BoundaryGeometryLayer::readBuffers(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    in.alignTo(8);
    return ::nds::core::geometry::Buffers(in, static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()), allocator);
}

::nds::core::geometry::Buffers BoundaryGeometryLayer::readBuffers(BoundaryGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in, const allocator_type& allocator)
{
    in.alignTo(8);
    return ::nds::core::geometry::Buffers(context.getBuffers(), in, static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()), allocator);
}

} // namespace instantiations
} // namespace lane
} // namespace nds

/**
 * Automatically generated by Zserio C++ extension version 2.12.0.
 * Generator setup: writerCode, pubsubCode, serviceCode, sqlCode, sourcesAmalgamation, stdAllocator.
 */

#include <zserio/StringConvertUtil.h>
#include <zserio/CppRuntimeException.h>
#include <zserio/HashCodeUtil.h>
#include <zserio/BitPositionUtil.h>
#include <zserio/BitSizeOfCalculator.h>
#include <zserio/BitFieldUtil.h>

#include <nds/lane/instantiations/RoadSurfacePolygonGeometryLayer.h>

namespace nds
{
namespace lane
{
namespace instantiations
{

RoadSurfacePolygonGeometryLayer::RoadSurfacePolygonGeometryLayer(const allocator_type& allocator) noexcept :
        m_isInitialized(false),
        m_coordShiftXY_(::nds::core::geometry::CoordShift()),
        m_coordShiftZ_(::nds::core::geometry::CoordShift()),
        m_numElements_(uint32_t()),
        m_identifier_(::zserio::NullOpt),
        m_types_(::zserio::NullOpt),
        m_buffers_(allocator)
{
}

RoadSurfacePolygonGeometryLayer::RoadSurfacePolygonGeometryLayer(::zserio::BitStreamReader& in,
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_, const allocator_type& allocator) :
        m_type_(type_),
        m_hasIds_(hasIds_),
        m_hasTypes_(hasTypes_),
        m_isInitialized(true),
        m_coordShiftXY_(readCoordShiftXY(in)),
        m_coordShiftZ_(readCoordShiftZ(in)),
        m_numElements_(readNumElements(in)),
        m_identifier_(readIdentifier(in, allocator)),
        m_types_(readTypes(in, allocator)),
        m_buffers_(readBuffers(in, allocator))
{
}

RoadSurfacePolygonGeometryLayer::RoadSurfacePolygonGeometryLayer(RoadSurfacePolygonGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in,
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_, const allocator_type& allocator) :
        m_type_(type_),
        m_hasIds_(hasIds_),
        m_hasTypes_(hasTypes_),
        m_isInitialized(true),
        m_coordShiftXY_(readCoordShiftXY(context, in)),
        m_coordShiftZ_(readCoordShiftZ(context, in)),
        m_numElements_(readNumElements(context, in)),
        m_identifier_(readIdentifier(context, in, allocator)),
        m_types_(readTypes(context, in, allocator)),
        m_buffers_(readBuffers(context, in, allocator))
{
}

RoadSurfacePolygonGeometryLayer::RoadSurfacePolygonGeometryLayer(const RoadSurfacePolygonGeometryLayer& other) :
        m_coordShiftXY_(other.m_coordShiftXY_),
        m_coordShiftZ_(other.m_coordShiftZ_),
        m_numElements_(other.m_numElements_),
        m_identifier_(other.m_identifier_),
        m_types_(other.m_types_),
        m_buffers_(other.m_buffers_)
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

RoadSurfacePolygonGeometryLayer& RoadSurfacePolygonGeometryLayer::operator=(const RoadSurfacePolygonGeometryLayer& other)
{
    m_coordShiftXY_ = other.m_coordShiftXY_;
    m_coordShiftZ_ = other.m_coordShiftZ_;
    m_numElements_ = other.m_numElements_;
    m_identifier_ = other.m_identifier_;
    m_types_ = other.m_types_;
    m_buffers_ = other.m_buffers_;
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;

    return *this;
}

RoadSurfacePolygonGeometryLayer::RoadSurfacePolygonGeometryLayer(RoadSurfacePolygonGeometryLayer&& other) :
        m_coordShiftXY_(::std::move(other.m_coordShiftXY_)),
        m_coordShiftZ_(::std::move(other.m_coordShiftZ_)),
        m_numElements_(::std::move(other.m_numElements_)),
        m_identifier_(::std::move(other.m_identifier_)),
        m_types_(::std::move(other.m_types_)),
        m_buffers_(::std::move(other.m_buffers_))
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

RoadSurfacePolygonGeometryLayer& RoadSurfacePolygonGeometryLayer::operator=(RoadSurfacePolygonGeometryLayer&& other)
{
    m_coordShiftXY_ = ::std::move(other.m_coordShiftXY_);
    m_coordShiftZ_ = ::std::move(other.m_coordShiftZ_);
    m_numElements_ = ::std::move(other.m_numElements_);
    m_identifier_ = ::std::move(other.m_identifier_);
    m_types_ = ::std::move(other.m_types_);
    m_buffers_ = ::std::move(other.m_buffers_);
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;

    return *this;
}

RoadSurfacePolygonGeometryLayer::RoadSurfacePolygonGeometryLayer(::zserio::PropagateAllocatorT,
        const RoadSurfacePolygonGeometryLayer& other, const allocator_type& allocator) :
        m_coordShiftXY_(::zserio::allocatorPropagatingCopy(other.m_coordShiftXY_, allocator)),
        m_coordShiftZ_(::zserio::allocatorPropagatingCopy(other.m_coordShiftZ_, allocator)),
        m_numElements_(::zserio::allocatorPropagatingCopy(other.m_numElements_, allocator)),
        m_identifier_(::zserio::allocatorPropagatingCopy(other.m_identifier_, allocator)),
        m_types_(::zserio::allocatorPropagatingCopy(other.m_types_, allocator)),
        m_buffers_(::zserio::allocatorPropagatingCopy(other.m_buffers_, allocator))
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

void RoadSurfacePolygonGeometryLayer::initialize(
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_)
{
    m_type_ = type_;
    m_hasIds_ = hasIds_;
    m_hasTypes_ = hasTypes_;
    m_isInitialized = true;

    initializeChildren();
}

bool RoadSurfacePolygonGeometryLayer::isInitialized() const
{
    return m_isInitialized;
}

void RoadSurfacePolygonGeometryLayer::initializeChildren()
{
    m_buffers_.initialize(static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()));
}

::nds::core::geometry::GeometryLayerType RoadSurfacePolygonGeometryLayer::getType() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'type' of compound 'RoadSurfacePolygonGeometryLayer' is not initialized!");

    return m_type_;
}

bool RoadSurfacePolygonGeometryLayer::getHasIds() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'hasIds' of compound 'RoadSurfacePolygonGeometryLayer' is not initialized!");

    return m_hasIds_;
}

bool RoadSurfacePolygonGeometryLayer::getHasTypes() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'hasTypes' of compound 'RoadSurfacePolygonGeometryLayer' is not initialized!");

    return m_hasTypes_;
}

::nds::core::geometry::CoordShift RoadSurfacePolygonGeometryLayer::getCoordShiftXY() const
{
    return m_coordShiftXY_;
}

void RoadSurfacePolygonGeometryLayer::setCoordShiftXY(::nds::core::geometry::CoordShift coordShiftXY_)
{
    m_coordShiftXY_ = coordShiftXY_;
}

::nds::core::geometry::CoordShift RoadSurfacePolygonGeometryLayer::getCoordShiftZ() const
{
    return m_coordShiftZ_;
}

void RoadSurfacePolygonGeometryLayer::setCoordShiftZ(::nds::core::geometry::CoordShift coordShiftZ_)
{
    m_coordShiftZ_ = coordShiftZ_;
}

uint32_t RoadSurfacePolygonGeometryLayer::getNumElements() const
{
    return m_numElements_;
}

void RoadSurfacePolygonGeometryLayer::setNumElements(uint32_t numElements_)
{
    m_numElements_ = numElements_;
}

::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>& RoadSurfacePolygonGeometryLayer::getIdentifier()
{
    return m_identifier_.value().getRawArray();
}

const ::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>& RoadSurfacePolygonGeometryLayer::getIdentifier() const
{
    return m_identifier_.value().getRawArray();
}

void RoadSurfacePolygonGeometryLayer::setIdentifier(const ::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>& identifier_)
{
    m_identifier_ = ZserioArrayType_identifier(identifier_);
}

void RoadSurfacePolygonGeometryLayer::setIdentifier(::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>&& identifier_)
{
    m_identifier_ = ZserioArrayType_identifier(std::move(identifier_));
}

bool RoadSurfacePolygonGeometryLayer::isIdentifierUsed() const
{
    return (getHasIds());
}

bool RoadSurfacePolygonGeometryLayer::isIdentifierSet() const
{
    return m_identifier_.hasValue();
}

void RoadSurfacePolygonGeometryLayer::resetIdentifier()
{
    m_identifier_.reset();
}

::zserio::vector<::nds::lane::roadsurface::RoadSurfacePolygonType>& RoadSurfacePolygonGeometryLayer::getTypes()
{
    return m_types_.value().getRawArray();
}

const ::zserio::vector<::nds::lane::roadsurface::RoadSurfacePolygonType>& RoadSurfacePolygonGeometryLayer::getTypes() const
{
    return m_types_.value().getRawArray();
}

void RoadSurfacePolygonGeometryLayer::setTypes(const ::zserio::vector<::nds::lane::roadsurface::RoadSurfacePolygonType>& types_)
{
    m_types_ = ZserioArrayType_types(types_);
}

void RoadSurfacePolygonGeometryLayer::setTypes(::zserio::vector<::nds::lane::roadsurface::RoadSurfacePolygonType>&& types_)
{
    m_types_ = ZserioArrayType_types(std::move(types_));
}

bool RoadSurfacePolygonGeometryLayer::isTypesUsed() const
{
    return (getHasTypes());
}

bool RoadSurfacePolygonGeometryLayer::isTypesSet() const
{
    return m_types_.hasValue();
}

void RoadSurfacePolygonGeometryLayer::resetTypes()
{
    m_types_.reset();
}

::nds::core::geometry::Buffers& RoadSurfacePolygonGeometryLayer::getBuffers()
{
    return m_buffers_;
}

const ::nds::core::geometry::Buffers& RoadSurfacePolygonGeometryLayer::getBuffers() const
{
    return m_buffers_;
}

void RoadSurfacePolygonGeometryLayer::setBuffers(const ::nds::core::geometry::Buffers& buffers_)
{
    m_buffers_ = buffers_;
}

void RoadSurfacePolygonGeometryLayer::setBuffers(::nds::core::geometry::Buffers&& buffers_)
{
    m_buffers_ = ::std::move(buffers_);
}

void RoadSurfacePolygonGeometryLayer::initPackingContext(RoadSurfacePolygonGeometryLayer::ZserioPackingContext& context) const
{
    context.getCoordShiftXY().init<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    context.getCoordShiftZ().init<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    context.getNumElements().init<::zserio::VarSizeArrayTraits>(m_numElements_);
    m_buffers_.initPackingContext(context.getBuffers());
}

size_t RoadSurfacePolygonGeometryLayer::bitSizeOf(size_t bitPosition) const
{
    size_t endBitPosition = bitPosition;

    endBitPosition += UINT8_C(5);
    endBitPosition += UINT8_C(5);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += ::zserio::bitSizeOfVarSize(m_numElements_);
    if (getHasIds())
    {
        endBitPosition += m_identifier_.value().bitSizeOfPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition += m_types_.value().bitSizeOfPacked(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += m_buffers_.bitSizeOf(endBitPosition);

    return endBitPosition - bitPosition;
}

size_t RoadSurfacePolygonGeometryLayer::bitSizeOf(RoadSurfacePolygonGeometryLayer::ZserioPackingContext& context, size_t bitPosition) const
{
    size_t endBitPosition = bitPosition;

    endBitPosition += context.getCoordShiftXY().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    endBitPosition += context.getCoordShiftZ().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += context.getNumElements().bitSizeOf<::zserio::VarSizeArrayTraits>(m_numElements_);
    if (getHasIds())
    {
        endBitPosition += m_identifier_.value().bitSizeOfPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition += m_types_.value().bitSizeOfPacked(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += m_buffers_.bitSizeOf(context.getBuffers(), endBitPosition);

    return endBitPosition - bitPosition;
}

size_t RoadSurfacePolygonGeometryLayer::initializeOffsets(size_t bitPosition)
{
    size_t endBitPosition = bitPosition;

    endBitPosition += UINT8_C(5);
    endBitPosition += UINT8_C(5);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += ::zserio::bitSizeOfVarSize(m_numElements_);
    if (getHasIds())
    {
        endBitPosition = m_identifier_.value().initializeOffsetsPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition = m_types_.value().initializeOffsetsPacked(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition = m_buffers_.initializeOffsets(endBitPosition);

    return endBitPosition;
}

size_t RoadSurfacePolygonGeometryLayer::initializeOffsets(RoadSurfacePolygonGeometryLayer::ZserioPackingContext& context, size_t bitPosition)
{
    size_t endBitPosition = bitPosition;

    endBitPosition += context.getCoordShiftXY().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    endBitPosition += context.getCoordShiftZ().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += context.getNumElements().bitSizeOf<::zserio::VarSizeArrayTraits>(m_numElements_);
    if (getHasIds())
    {
        endBitPosition = m_identifier_.value().initializeOffsetsPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition = m_types_.value().initializeOffsetsPacked(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition = m_buffers_.initializeOffsets(context.getBuffers(), endBitPosition);

    return endBitPosition;
}

bool RoadSurfacePolygonGeometryLayer::operator==(const RoadSurfacePolygonGeometryLayer& other) const
{
    if (this != &other)
    {
        return
                (getType() == other.getType()) &&
                (getHasIds() == other.getHasIds()) &&
                (getHasTypes() == other.getHasTypes()) &&
                (m_coordShiftXY_ == other.m_coordShiftXY_) &&
                (m_coordShiftZ_ == other.m_coordShiftZ_) &&
                (m_numElements_ == other.m_numElements_) &&
                (!isIdentifierUsed() ? !other.isIdentifierUsed() : (m_identifier_ == other.m_identifier_)) &&
                (!isTypesUsed() ? !other.isTypesUsed() : (m_types_ == other.m_types_)) &&
                (m_buffers_ == other.m_buffers_);
    }

    return true;
}

uint32_t RoadSurfacePolygonGeometryLayer::hashCode() const
{
    uint32_t result = ::zserio::HASH_SEED;

    result = ::zserio::calcHashCode(result, getType());
    result = ::zserio::calcHashCode(result, getHasIds());
    result = ::zserio::calcHashCode(result, getHasTypes());
    result = ::zserio::calcHashCode(result, m_coordShiftXY_);
    result = ::zserio::calcHashCode(result, m_coordShiftZ_);
    result = ::zserio::calcHashCode(result, m_numElements_);
    if (isIdentifierUsed())
        result = ::zserio::calcHashCode(result, m_identifier_);
    if (isTypesUsed())
        result = ::zserio::calcHashCode(result, m_types_);
    result = ::zserio::calcHashCode(result, m_buffers_);

    return result;
}

void RoadSurfacePolygonGeometryLayer::write(::zserio::BitStreamWriter& out) const
{
    out.writeBits(m_coordShiftXY_, UINT8_C(5));

    out.writeBits(m_coordShiftZ_, UINT8_C(5));

    out.alignTo(8);
    out.writeVarSize(m_numElements_);

    if (getHasIds())
    {
        // check array length
        if (m_identifier_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field RoadSurfacePolygonGeometryLayer.identifier: ") <<
                    m_identifier_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_identifier_.value().writePacked(*this, out);
    }

    if (getHasTypes())
    {
        out.alignTo(8);
        // check array length
        if (m_types_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field RoadSurfacePolygonGeometryLayer.types: ") <<
                    m_types_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_types_.value().writePacked(*this, out);
    }

    out.alignTo(8);
    // check parameters
    if (m_buffers_.getType() != static_cast<::nds::core::geometry::GeometryLayerType>(getType()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter type for field RoadSurfacePolygonGeometryLayer.buffers: ") <<
                m_buffers_.getType() << " != " << static_cast<::nds::core::geometry::GeometryLayerType>(getType()) << "!";
    }
    if (m_buffers_.getShiftXY() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftXY for field RoadSurfacePolygonGeometryLayer.buffers: ") <<
                m_buffers_.getShiftXY() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()) << "!";
    }
    if (m_buffers_.getShiftZ() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftZ for field RoadSurfacePolygonGeometryLayer.buffers: ") <<
                m_buffers_.getShiftZ() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()) << "!";
    }
    if (m_buffers_.getNumElements() != static_cast<uint32_t>(getNumElements()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter numElements for field RoadSurfacePolygonGeometryLayer.buffers: ") <<
                m_buffers_.getNumElements() << " != " << static_cast<uint32_t>(getNumElements()) << "!";
    }
    m_buffers_.write(out);
}

void RoadSurfacePolygonGeometryLayer::write(RoadSurfacePolygonGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamWriter& out) const
{
    context.getCoordShiftXY().write<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(out, m_coordShiftXY_);

    context.getCoordShiftZ().write<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(out, m_coordShiftZ_);

    out.alignTo(8);
    context.getNumElements().write<::zserio::VarSizeArrayTraits>(out, m_numElements_);

    if (getHasIds())
    {
        // check array length
        if (m_identifier_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field RoadSurfacePolygonGeometryLayer.identifier: ") <<
                    m_identifier_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_identifier_.value().writePacked(*this, out);
    }

    if (getHasTypes())
    {
        out.alignTo(8);
        // check array length
        if (m_types_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field RoadSurfacePolygonGeometryLayer.types: ") <<
                    m_types_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_types_.value().writePacked(*this, out);
    }

    out.alignTo(8);
    // check parameters
    if (m_buffers_.getType() != static_cast<::nds::core::geometry::GeometryLayerType>(getType()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter type for field RoadSurfacePolygonGeometryLayer.buffers: ") <<
                m_buffers_.getType() << " != " << static_cast<::nds::core::geometry::GeometryLayerType>(getType()) << "!";
    }
    if (m_buffers_.getShiftXY() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftXY for field RoadSurfacePolygonGeometryLayer.buffers: ") <<
                m_buffers_.getShiftXY() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()) << "!";
    }
    if (m_buffers_.getShiftZ() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftZ for field RoadSurfacePolygonGeometryLayer.buffers: ") <<
                m_buffers_.getShiftZ() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()) << "!";
    }
    if (m_buffers_.getNumElements() != static_cast<uint32_t>(getNumElements()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter numElements for field RoadSurfacePolygonGeometryLayer.buffers: ") <<
                m_buffers_.getNumElements() << " != " << static_cast<uint32_t>(getNumElements()) << "!";
    }
    m_buffers_.write(context.getBuffers(), out);
}

void RoadSurfacePolygonGeometryLayer::ZserioElementFactory_identifier::create(RoadSurfacePolygonGeometryLayer&        ,
        ::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>& array,
        ::zserio::BitStreamReader& in, size_t)
{
    array.emplace_back(in, array.get_allocator());
}

void RoadSurfacePolygonGeometryLayer::ZserioElementFactory_identifier::create(RoadSurfacePolygonGeometryLayer&        ,
        ::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>& array,
        ::nds::lane::reference::types::RoadSurfaceId::ZserioPackingContext& context, ::zserio::BitStreamReader& in,
        size_t)
{
    array.emplace_back(context, in, array.get_allocator());
}

void RoadSurfacePolygonGeometryLayer::ZserioElementFactory_types::create(RoadSurfacePolygonGeometryLayer&        ,
        ::zserio::vector<::nds::lane::roadsurface::RoadSurfacePolygonType>& array,
        ::zserio::BitStreamReader& in, size_t)
{
    array.emplace_back(in, array.get_allocator());
}

void RoadSurfacePolygonGeometryLayer::ZserioElementFactory_types::create(RoadSurfacePolygonGeometryLayer&        ,
        ::zserio::vector<::nds::lane::roadsurface::RoadSurfacePolygonType>& array,
        ::nds::lane::roadsurface::RoadSurfacePolygonType::ZserioPackingContext& context, ::zserio::BitStreamReader& in,
        size_t)
{
    array.emplace_back(context, in, array.get_allocator());
}

::nds::core::geometry::CoordShift RoadSurfacePolygonGeometryLayer::readCoordShiftXY(::zserio::BitStreamReader& in)
{
    return static_cast<::nds::core::geometry::CoordShift>(in.readBits(UINT8_C(5)));
}

::nds::core::geometry::CoordShift RoadSurfacePolygonGeometryLayer::readCoordShiftXY(RoadSurfacePolygonGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    return context.getCoordShiftXY().read<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(in);
}
::nds::core::geometry::CoordShift RoadSurfacePolygonGeometryLayer::readCoordShiftZ(::zserio::BitStreamReader& in)
{
    return static_cast<::nds::core::geometry::CoordShift>(in.readBits(UINT8_C(5)));
}

::nds::core::geometry::CoordShift RoadSurfacePolygonGeometryLayer::readCoordShiftZ(RoadSurfacePolygonGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    return context.getCoordShiftZ().read<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(in);
}
uint32_t RoadSurfacePolygonGeometryLayer::readNumElements(::zserio::BitStreamReader& in)
{
    in.alignTo(8);
    return static_cast<uint32_t>(in.readVarSize());
}

uint32_t RoadSurfacePolygonGeometryLayer::readNumElements(RoadSurfacePolygonGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    in.alignTo(8);
    return context.getNumElements().read<::zserio::VarSizeArrayTraits>(in);
}
::zserio::InplaceOptionalHolder<RoadSurfacePolygonGeometryLayer::ZserioArrayType_identifier> RoadSurfacePolygonGeometryLayer::readIdentifier(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    if (getHasIds())
    {
        ZserioArrayType_identifier readField(allocator);
        readField.readPacked(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::zserio::NullOpt);
}

::zserio::InplaceOptionalHolder<RoadSurfacePolygonGeometryLayer::ZserioArrayType_identifier> RoadSurfacePolygonGeometryLayer::readIdentifier(RoadSurfacePolygonGeometryLayer::ZserioPackingContext&, ::zserio::BitStreamReader& in, const allocator_type& allocator)
{
    if (getHasIds())
    {
        ZserioArrayType_identifier readField(allocator);
        readField.readPacked(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::zserio::NullOpt);
}
::zserio::InplaceOptionalHolder<RoadSurfacePolygonGeometryLayer::ZserioArrayType_types> RoadSurfacePolygonGeometryLayer::readTypes(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    if (getHasTypes())
    {
        in.alignTo(8);
        ZserioArrayType_types readField(allocator);
        readField.readPacked(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::zserio::NullOpt);
}

::zserio::InplaceOptionalHolder<RoadSurfacePolygonGeometryLayer::ZserioArrayType_types> RoadSurfacePolygonGeometryLayer::readTypes(RoadSurfacePolygonGeometryLayer::ZserioPackingContext&, ::zserio::BitStreamReader& in, const allocator_type& allocator)
{
    if (getHasTypes())
    {
        in.alignTo(8);
        ZserioArrayType_types readField(allocator);
        readField.readPacked(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::zserio::NullOpt);
}
::nds::core::geometry::Buffers RoadSurfacePolygonGeometryLayer::readBuffers(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    in.alignTo(8);
    return ::nds::core::geometry::Buffers(in, static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()), allocator);
}

::nds::core::geometry::Buffers RoadSurfacePolygonGeometryLayer::readBuffers(RoadSurfacePolygonGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in, const allocator_type& allocator)
{
    in.alignTo(8);
    return ::nds::core::geometry::Buffers(context.getBuffers(), in, static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()), allocator);
}

} // namespace instantiations
} // namespace lane
} // namespace nds

/**
 * Automatically generated by Zserio C++ extension version 2.12.0.
 * Generator setup: writerCode, pubsubCode, serviceCode, sqlCode, sourcesAmalgamation, stdAllocator.
 */

#include <zserio/StringConvertUtil.h>
#include <zserio/CppRuntimeException.h>
#include <zserio/HashCodeUtil.h>
#include <zserio/BitPositionUtil.h>
#include <zserio/BitSizeOfCalculator.h>
#include <zserio/BitFieldUtil.h>

#include <nds/lane/instantiations/RoadSurfaceLineGeometryLayer.h>

namespace nds
{
namespace lane
{
namespace instantiations
{

RoadSurfaceLineGeometryLayer::RoadSurfaceLineGeometryLayer(const allocator_type& allocator) noexcept :
        m_isInitialized(false),
        m_coordShiftXY_(::nds::core::geometry::CoordShift()),
        m_coordShiftZ_(::nds::core::geometry::CoordShift()),
        m_numElements_(uint32_t()),
        m_identifier_(::zserio::NullOpt),
        m_types_(::zserio::NullOpt),
        m_buffers_(allocator)
{
}

RoadSurfaceLineGeometryLayer::RoadSurfaceLineGeometryLayer(::zserio::BitStreamReader& in,
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_, const allocator_type& allocator) :
        m_type_(type_),
        m_hasIds_(hasIds_),
        m_hasTypes_(hasTypes_),
        m_isInitialized(true),
        m_coordShiftXY_(readCoordShiftXY(in)),
        m_coordShiftZ_(readCoordShiftZ(in)),
        m_numElements_(readNumElements(in)),
        m_identifier_(readIdentifier(in, allocator)),
        m_types_(readTypes(in, allocator)),
        m_buffers_(readBuffers(in, allocator))
{
}

RoadSurfaceLineGeometryLayer::RoadSurfaceLineGeometryLayer(RoadSurfaceLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in,
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_, const allocator_type& allocator) :
        m_type_(type_),
        m_hasIds_(hasIds_),
        m_hasTypes_(hasTypes_),
        m_isInitialized(true),
        m_coordShiftXY_(readCoordShiftXY(context, in)),
        m_coordShiftZ_(readCoordShiftZ(context, in)),
        m_numElements_(readNumElements(context, in)),
        m_identifier_(readIdentifier(context, in, allocator)),
        m_types_(readTypes(context, in, allocator)),
        m_buffers_(readBuffers(context, in, allocator))
{
}

RoadSurfaceLineGeometryLayer::RoadSurfaceLineGeometryLayer(const RoadSurfaceLineGeometryLayer& other) :
        m_coordShiftXY_(other.m_coordShiftXY_),
        m_coordShiftZ_(other.m_coordShiftZ_),
        m_numElements_(other.m_numElements_),
        m_identifier_(other.m_identifier_),
        m_types_(other.m_types_),
        m_buffers_(other.m_buffers_)
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

RoadSurfaceLineGeometryLayer& RoadSurfaceLineGeometryLayer::operator=(const RoadSurfaceLineGeometryLayer& other)
{
    m_coordShiftXY_ = other.m_coordShiftXY_;
    m_coordShiftZ_ = other.m_coordShiftZ_;
    m_numElements_ = other.m_numElements_;
    m_identifier_ = other.m_identifier_;
    m_types_ = other.m_types_;
    m_buffers_ = other.m_buffers_;
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;

    return *this;
}

RoadSurfaceLineGeometryLayer::RoadSurfaceLineGeometryLayer(RoadSurfaceLineGeometryLayer&& other) :
        m_coordShiftXY_(::std::move(other.m_coordShiftXY_)),
        m_coordShiftZ_(::std::move(other.m_coordShiftZ_)),
        m_numElements_(::std::move(other.m_numElements_)),
        m_identifier_(::std::move(other.m_identifier_)),
        m_types_(::std::move(other.m_types_)),
        m_buffers_(::std::move(other.m_buffers_))
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

RoadSurfaceLineGeometryLayer& RoadSurfaceLineGeometryLayer::operator=(RoadSurfaceLineGeometryLayer&& other)
{
    m_coordShiftXY_ = ::std::move(other.m_coordShiftXY_);
    m_coordShiftZ_ = ::std::move(other.m_coordShiftZ_);
    m_numElements_ = ::std::move(other.m_numElements_);
    m_identifier_ = ::std::move(other.m_identifier_);
    m_types_ = ::std::move(other.m_types_);
    m_buffers_ = ::std::move(other.m_buffers_);
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;

    return *this;
}

RoadSurfaceLineGeometryLayer::RoadSurfaceLineGeometryLayer(::zserio::PropagateAllocatorT,
        const RoadSurfaceLineGeometryLayer& other, const allocator_type& allocator) :
        m_coordShiftXY_(::zserio::allocatorPropagatingCopy(other.m_coordShiftXY_, allocator)),
        m_coordShiftZ_(::zserio::allocatorPropagatingCopy(other.m_coordShiftZ_, allocator)),
        m_numElements_(::zserio::allocatorPropagatingCopy(other.m_numElements_, allocator)),
        m_identifier_(::zserio::allocatorPropagatingCopy(other.m_identifier_, allocator)),
        m_types_(::zserio::allocatorPropagatingCopy(other.m_types_, allocator)),
        m_buffers_(::zserio::allocatorPropagatingCopy(other.m_buffers_, allocator))
{
    if (other.m_isInitialized)
        initialize(other.m_type_, other.m_hasIds_, other.m_hasTypes_);
    else
        m_isInitialized = false;
}

void RoadSurfaceLineGeometryLayer::initialize(
        ::nds::core::geometry::GeometryLayerType type_,
        bool hasIds_,
        bool hasTypes_)
{
    m_type_ = type_;
    m_hasIds_ = hasIds_;
    m_hasTypes_ = hasTypes_;
    m_isInitialized = true;

    initializeChildren();
}

bool RoadSurfaceLineGeometryLayer::isInitialized() const
{
    return m_isInitialized;
}

void RoadSurfaceLineGeometryLayer::initializeChildren()
{
    m_buffers_.initialize(static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()));
}

::nds::core::geometry::GeometryLayerType RoadSurfaceLineGeometryLayer::getType() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'type' of compound 'RoadSurfaceLineGeometryLayer' is not initialized!");

    return m_type_;
}

bool RoadSurfaceLineGeometryLayer::getHasIds() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'hasIds' of compound 'RoadSurfaceLineGeometryLayer' is not initialized!");

    return m_hasIds_;
}

bool RoadSurfaceLineGeometryLayer::getHasTypes() const
{
    if (!m_isInitialized)
        throw ::zserio::CppRuntimeException("Parameter 'hasTypes' of compound 'RoadSurfaceLineGeometryLayer' is not initialized!");

    return m_hasTypes_;
}

::nds::core::geometry::CoordShift RoadSurfaceLineGeometryLayer::getCoordShiftXY() const
{
    return m_coordShiftXY_;
}

void RoadSurfaceLineGeometryLayer::setCoordShiftXY(::nds::core::geometry::CoordShift coordShiftXY_)
{
    m_coordShiftXY_ = coordShiftXY_;
}

::nds::core::geometry::CoordShift RoadSurfaceLineGeometryLayer::getCoordShiftZ() const
{
    return m_coordShiftZ_;
}

void RoadSurfaceLineGeometryLayer::setCoordShiftZ(::nds::core::geometry::CoordShift coordShiftZ_)
{
    m_coordShiftZ_ = coordShiftZ_;
}

uint32_t RoadSurfaceLineGeometryLayer::getNumElements() const
{
    return m_numElements_;
}

void RoadSurfaceLineGeometryLayer::setNumElements(uint32_t numElements_)
{
    m_numElements_ = numElements_;
}

::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>& RoadSurfaceLineGeometryLayer::getIdentifier()
{
    return m_identifier_.value().getRawArray();
}

const ::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>& RoadSurfaceLineGeometryLayer::getIdentifier() const
{
    return m_identifier_.value().getRawArray();
}

void RoadSurfaceLineGeometryLayer::setIdentifier(const ::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>& identifier_)
{
    m_identifier_ = ZserioArrayType_identifier(identifier_);
}

void RoadSurfaceLineGeometryLayer::setIdentifier(::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>&& identifier_)
{
    m_identifier_ = ZserioArrayType_identifier(std::move(identifier_));
}

bool RoadSurfaceLineGeometryLayer::isIdentifierUsed() const
{
    return (getHasIds());
}

bool RoadSurfaceLineGeometryLayer::isIdentifierSet() const
{
    return m_identifier_.hasValue();
}

void RoadSurfaceLineGeometryLayer::resetIdentifier()
{
    m_identifier_.reset();
}

::zserio::vector<::nds::lane::roadsurface::RoadSurfaceLineType>& RoadSurfaceLineGeometryLayer::getTypes()
{
    return m_types_.value().getRawArray();
}

const ::zserio::vector<::nds::lane::roadsurface::RoadSurfaceLineType>& RoadSurfaceLineGeometryLayer::getTypes() const
{
    return m_types_.value().getRawArray();
}

void RoadSurfaceLineGeometryLayer::setTypes(const ::zserio::vector<::nds::lane::roadsurface::RoadSurfaceLineType>& types_)
{
    m_types_ = ZserioArrayType_types(types_);
}

void RoadSurfaceLineGeometryLayer::setTypes(::zserio::vector<::nds::lane::roadsurface::RoadSurfaceLineType>&& types_)
{
    m_types_ = ZserioArrayType_types(std::move(types_));
}

bool RoadSurfaceLineGeometryLayer::isTypesUsed() const
{
    return (getHasTypes());
}

bool RoadSurfaceLineGeometryLayer::isTypesSet() const
{
    return m_types_.hasValue();
}

void RoadSurfaceLineGeometryLayer::resetTypes()
{
    m_types_.reset();
}

::nds::core::geometry::Buffers& RoadSurfaceLineGeometryLayer::getBuffers()
{
    return m_buffers_;
}

const ::nds::core::geometry::Buffers& RoadSurfaceLineGeometryLayer::getBuffers() const
{
    return m_buffers_;
}

void RoadSurfaceLineGeometryLayer::setBuffers(const ::nds::core::geometry::Buffers& buffers_)
{
    m_buffers_ = buffers_;
}

void RoadSurfaceLineGeometryLayer::setBuffers(::nds::core::geometry::Buffers&& buffers_)
{
    m_buffers_ = ::std::move(buffers_);
}

void RoadSurfaceLineGeometryLayer::initPackingContext(RoadSurfaceLineGeometryLayer::ZserioPackingContext& context) const
{
    context.getCoordShiftXY().init<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    context.getCoordShiftZ().init<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    context.getNumElements().init<::zserio::VarSizeArrayTraits>(m_numElements_);
    m_buffers_.initPackingContext(context.getBuffers());
}

size_t RoadSurfaceLineGeometryLayer::bitSizeOf(size_t bitPosition) const
{
    size_t endBitPosition = bitPosition;

    endBitPosition += UINT8_C(5);
    endBitPosition += UINT8_C(5);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += ::zserio::bitSizeOfVarSize(m_numElements_);
    if (getHasIds())
    {
        endBitPosition += m_identifier_.value().bitSizeOfPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition += m_types_.value().bitSizeOfPacked(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += m_buffers_.bitSizeOf(endBitPosition);

    return endBitPosition - bitPosition;
}

size_t RoadSurfaceLineGeometryLayer::bitSizeOf(RoadSurfaceLineGeometryLayer::ZserioPackingContext& context, size_t bitPosition) const
{
    size_t endBitPosition = bitPosition;

    endBitPosition += context.getCoordShiftXY().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    endBitPosition += context.getCoordShiftZ().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += context.getNumElements().bitSizeOf<::zserio::VarSizeArrayTraits>(m_numElements_);
    if (getHasIds())
    {
        endBitPosition += m_identifier_.value().bitSizeOfPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition += m_types_.value().bitSizeOfPacked(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += m_buffers_.bitSizeOf(context.getBuffers(), endBitPosition);

    return endBitPosition - bitPosition;
}

size_t RoadSurfaceLineGeometryLayer::initializeOffsets(size_t bitPosition)
{
    size_t endBitPosition = bitPosition;

    endBitPosition += UINT8_C(5);
    endBitPosition += UINT8_C(5);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += ::zserio::bitSizeOfVarSize(m_numElements_);
    if (getHasIds())
    {
        endBitPosition = m_identifier_.value().initializeOffsetsPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition = m_types_.value().initializeOffsetsPacked(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition = m_buffers_.initializeOffsets(endBitPosition);

    return endBitPosition;
}

size_t RoadSurfaceLineGeometryLayer::initializeOffsets(RoadSurfaceLineGeometryLayer::ZserioPackingContext& context, size_t bitPosition)
{
    size_t endBitPosition = bitPosition;

    endBitPosition += context.getCoordShiftXY().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftXY_);
    endBitPosition += context.getCoordShiftZ().bitSizeOf<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(m_coordShiftZ_);
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition += context.getNumElements().bitSizeOf<::zserio::VarSizeArrayTraits>(m_numElements_);
    if (getHasIds())
    {
        endBitPosition = m_identifier_.value().initializeOffsetsPacked(*this, endBitPosition);
    }
    if (getHasTypes())
    {
        endBitPosition = ::zserio::alignTo(8, endBitPosition);
        endBitPosition = m_types_.value().initializeOffsetsPacked(*this, endBitPosition);
    }
    endBitPosition = ::zserio::alignTo(8, endBitPosition);
    endBitPosition = m_buffers_.initializeOffsets(context.getBuffers(), endBitPosition);

    return endBitPosition;
}

bool RoadSurfaceLineGeometryLayer::operator==(const RoadSurfaceLineGeometryLayer& other) const
{
    if (this != &other)
    {
        return
                (getType() == other.getType()) &&
                (getHasIds() == other.getHasIds()) &&
                (getHasTypes() == other.getHasTypes()) &&
                (m_coordShiftXY_ == other.m_coordShiftXY_) &&
                (m_coordShiftZ_ == other.m_coordShiftZ_) &&
                (m_numElements_ == other.m_numElements_) &&
                (!isIdentifierUsed() ? !other.isIdentifierUsed() : (m_identifier_ == other.m_identifier_)) &&
                (!isTypesUsed() ? !other.isTypesUsed() : (m_types_ == other.m_types_)) &&
                (m_buffers_ == other.m_buffers_);
    }

    return true;
}

uint32_t RoadSurfaceLineGeometryLayer::hashCode() const
{
    uint32_t result = ::zserio::HASH_SEED;

    result = ::zserio::calcHashCode(result, getType());
    result = ::zserio::calcHashCode(result, getHasIds());
    result = ::zserio::calcHashCode(result, getHasTypes());
    result = ::zserio::calcHashCode(result, m_coordShiftXY_);
    result = ::zserio::calcHashCode(result, m_coordShiftZ_);
    result = ::zserio::calcHashCode(result, m_numElements_);
    if (isIdentifierUsed())
        result = ::zserio::calcHashCode(result, m_identifier_);
    if (isTypesUsed())
        result = ::zserio::calcHashCode(result, m_types_);
    result = ::zserio::calcHashCode(result, m_buffers_);

    return result;
}

void RoadSurfaceLineGeometryLayer::write(::zserio::BitStreamWriter& out) const
{
    out.writeBits(m_coordShiftXY_, UINT8_C(5));

    out.writeBits(m_coordShiftZ_, UINT8_C(5));

    out.alignTo(8);
    out.writeVarSize(m_numElements_);

    if (getHasIds())
    {
        // check array length
        if (m_identifier_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field RoadSurfaceLineGeometryLayer.identifier: ") <<
                    m_identifier_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_identifier_.value().writePacked(*this, out);
    }

    if (getHasTypes())
    {
        out.alignTo(8);
        // check array length
        if (m_types_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field RoadSurfaceLineGeometryLayer.types: ") <<
                    m_types_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_types_.value().writePacked(*this, out);
    }

    out.alignTo(8);
    // check parameters
    if (m_buffers_.getType() != static_cast<::nds::core::geometry::GeometryLayerType>(getType()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter type for field RoadSurfaceLineGeometryLayer.buffers: ") <<
                m_buffers_.getType() << " != " << static_cast<::nds::core::geometry::GeometryLayerType>(getType()) << "!";
    }
    if (m_buffers_.getShiftXY() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftXY for field RoadSurfaceLineGeometryLayer.buffers: ") <<
                m_buffers_.getShiftXY() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()) << "!";
    }
    if (m_buffers_.getShiftZ() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftZ for field RoadSurfaceLineGeometryLayer.buffers: ") <<
                m_buffers_.getShiftZ() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()) << "!";
    }
    if (m_buffers_.getNumElements() != static_cast<uint32_t>(getNumElements()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter numElements for field RoadSurfaceLineGeometryLayer.buffers: ") <<
                m_buffers_.getNumElements() << " != " << static_cast<uint32_t>(getNumElements()) << "!";
    }
    m_buffers_.write(out);
}

void RoadSurfaceLineGeometryLayer::write(RoadSurfaceLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamWriter& out) const
{
    context.getCoordShiftXY().write<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(out, m_coordShiftXY_);

    context.getCoordShiftZ().write<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(out, m_coordShiftZ_);

    out.alignTo(8);
    context.getNumElements().write<::zserio::VarSizeArrayTraits>(out, m_numElements_);

    if (getHasIds())
    {
        // check array length
        if (m_identifier_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field RoadSurfaceLineGeometryLayer.identifier: ") <<
                    m_identifier_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_identifier_.value().writePacked(*this, out);
    }

    if (getHasTypes())
    {
        out.alignTo(8);
        // check array length
        if (m_types_.value().getRawArray().size() != static_cast<size_t>(getNumElements()))
        {
            throw ::zserio::CppRuntimeException("Write: Wrong array length for field RoadSurfaceLineGeometryLayer.types: ") <<
                    m_types_.value().getRawArray().size() << " != " <<
                    static_cast<size_t>(getNumElements()) << "!";
        }
        m_types_.value().writePacked(*this, out);
    }

    out.alignTo(8);
    // check parameters
    if (m_buffers_.getType() != static_cast<::nds::core::geometry::GeometryLayerType>(getType()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter type for field RoadSurfaceLineGeometryLayer.buffers: ") <<
                m_buffers_.getType() << " != " << static_cast<::nds::core::geometry::GeometryLayerType>(getType()) << "!";
    }
    if (m_buffers_.getShiftXY() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftXY for field RoadSurfaceLineGeometryLayer.buffers: ") <<
                m_buffers_.getShiftXY() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()) << "!";
    }
    if (m_buffers_.getShiftZ() != static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter shiftZ for field RoadSurfaceLineGeometryLayer.buffers: ") <<
                m_buffers_.getShiftZ() << " != " << static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()) << "!";
    }
    if (m_buffers_.getNumElements() != static_cast<uint32_t>(getNumElements()))
    {
        throw ::zserio::CppRuntimeException("Write: Wrong parameter numElements for field RoadSurfaceLineGeometryLayer.buffers: ") <<
                m_buffers_.getNumElements() << " != " << static_cast<uint32_t>(getNumElements()) << "!";
    }
    m_buffers_.write(context.getBuffers(), out);
}

void RoadSurfaceLineGeometryLayer::ZserioElementFactory_identifier::create(RoadSurfaceLineGeometryLayer&        ,
        ::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>& array,
        ::zserio::BitStreamReader& in, size_t)
{
    array.emplace_back(in, array.get_allocator());
}

void RoadSurfaceLineGeometryLayer::ZserioElementFactory_identifier::create(RoadSurfaceLineGeometryLayer&        ,
        ::zserio::vector<::nds::lane::reference::types::RoadSurfaceId>& array,
        ::nds::lane::reference::types::RoadSurfaceId::ZserioPackingContext& context, ::zserio::BitStreamReader& in,
        size_t)
{
    array.emplace_back(context, in, array.get_allocator());
}

void RoadSurfaceLineGeometryLayer::ZserioElementFactory_types::create(RoadSurfaceLineGeometryLayer&        ,
        ::zserio::vector<::nds::lane::roadsurface::RoadSurfaceLineType>& array,
        ::zserio::BitStreamReader& in, size_t)
{
    array.emplace_back(in, array.get_allocator());
}

void RoadSurfaceLineGeometryLayer::ZserioElementFactory_types::create(RoadSurfaceLineGeometryLayer&        ,
        ::zserio::vector<::nds::lane::roadsurface::RoadSurfaceLineType>& array,
        ::nds::lane::roadsurface::RoadSurfaceLineType::ZserioPackingContext& context, ::zserio::BitStreamReader& in,
        size_t)
{
    array.emplace_back(context, in, array.get_allocator());
}

::nds::core::geometry::CoordShift RoadSurfaceLineGeometryLayer::readCoordShiftXY(::zserio::BitStreamReader& in)
{
    return static_cast<::nds::core::geometry::CoordShift>(in.readBits(UINT8_C(5)));
}

::nds::core::geometry::CoordShift RoadSurfaceLineGeometryLayer::readCoordShiftXY(RoadSurfaceLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    return context.getCoordShiftXY().read<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(in);
}
::nds::core::geometry::CoordShift RoadSurfaceLineGeometryLayer::readCoordShiftZ(::zserio::BitStreamReader& in)
{
    return static_cast<::nds::core::geometry::CoordShift>(in.readBits(UINT8_C(5)));
}

::nds::core::geometry::CoordShift RoadSurfaceLineGeometryLayer::readCoordShiftZ(RoadSurfaceLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    return context.getCoordShiftZ().read<::zserio::BitFieldArrayTraits<::nds::core::geometry::CoordShift, UINT8_C(5)>>(in);
}
uint32_t RoadSurfaceLineGeometryLayer::readNumElements(::zserio::BitStreamReader& in)
{
    in.alignTo(8);
    return static_cast<uint32_t>(in.readVarSize());
}

uint32_t RoadSurfaceLineGeometryLayer::readNumElements(RoadSurfaceLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in)
{
    in.alignTo(8);
    return context.getNumElements().read<::zserio::VarSizeArrayTraits>(in);
}
::zserio::InplaceOptionalHolder<RoadSurfaceLineGeometryLayer::ZserioArrayType_identifier> RoadSurfaceLineGeometryLayer::readIdentifier(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    if (getHasIds())
    {
        ZserioArrayType_identifier readField(allocator);
        readField.readPacked(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::zserio::NullOpt);
}

::zserio::InplaceOptionalHolder<RoadSurfaceLineGeometryLayer::ZserioArrayType_identifier> RoadSurfaceLineGeometryLayer::readIdentifier(RoadSurfaceLineGeometryLayer::ZserioPackingContext&, ::zserio::BitStreamReader& in, const allocator_type& allocator)
{
    if (getHasIds())
    {
        ZserioArrayType_identifier readField(allocator);
        readField.readPacked(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_identifier>(::zserio::NullOpt);
}
::zserio::InplaceOptionalHolder<RoadSurfaceLineGeometryLayer::ZserioArrayType_types> RoadSurfaceLineGeometryLayer::readTypes(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    if (getHasTypes())
    {
        in.alignTo(8);
        ZserioArrayType_types readField(allocator);
        readField.readPacked(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::zserio::NullOpt);
}

::zserio::InplaceOptionalHolder<RoadSurfaceLineGeometryLayer::ZserioArrayType_types> RoadSurfaceLineGeometryLayer::readTypes(RoadSurfaceLineGeometryLayer::ZserioPackingContext&, ::zserio::BitStreamReader& in, const allocator_type& allocator)
{
    if (getHasTypes())
    {
        in.alignTo(8);
        ZserioArrayType_types readField(allocator);
        readField.readPacked(*this, in, static_cast<size_t>(getNumElements()));

        return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::std::move(readField));
    }

    return ::zserio::InplaceOptionalHolder<ZserioArrayType_types>(::zserio::NullOpt);
}
::nds::core::geometry::Buffers RoadSurfaceLineGeometryLayer::readBuffers(::zserio::BitStreamReader& in,
        const allocator_type& allocator)
{
    in.alignTo(8);
    return ::nds::core::geometry::Buffers(in, static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()), allocator);
}

::nds::core::geometry::Buffers RoadSurfaceLineGeometryLayer::readBuffers(RoadSurfaceLineGeometryLayer::ZserioPackingContext& context, ::zserio::BitStreamReader& in, const allocator_type& allocator)
{
    in.alignTo(8);
    return ::nds::core::geometry::Buffers(context.getBuffers(), in, static_cast<::nds::core::geometry::GeometryLayerType>(getType()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftXY()), static_cast<::nds::core::geometry::CoordShift>(getCoordShiftZ()), static_cast<uint32_t>(getNumElements()), allocator);
}

} // namespace instantiations
} // namespace lane
} // namespace nds
